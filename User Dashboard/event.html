<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/event.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <title>Aagneya</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

</head>
<script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
        darkMode: 'class',
    }
</script>

<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <a href="#" class="logo"> <i class='bx bx-code-alt'></i>
            <div class="logo-name"><span>Aag</span>neya</div>
        </a>
        <ul class="side-menu">
            <li><a href="dashboard.html"><i class='bx bxs-dashboard'></i>Dashboard</a></li>
            <li class="active"><a href="event.html"><i class='bx bx-calendar-event'></i>Events</a></li>
            <li><a href="achivement.html"><i class='bx bx-medal'></i>Achievement</a></li>
            <li><a href="#"><i class='bx bx-news'></i>Blog</a></li>

            <li><a href="#" class="toggle-submenu" data-target="community"><i class='bx bx-category-alt'></i>Community <i class='bx bx-chevron-down'></i> </a> </li>
            <ul class="submenu" id="community-submenu">
                <li><a href="./community/voting.html"><i class='bx bxl-graphql'></i>Stats</a></li>
                <li><a href="./community/president.html"><i class='bx bx-crown'></i>President</a></li>
                <li><a href="./community/vicepresident.html"><i class='bx bx-star'></i>Vice President</a></li>
                <li><a href="./community/secretary.html"><i class='bx bx-notepad'></i>Secretary</a></li>
                <li><a href="./community/pulicrelation.html"><i class='bx bx-broadcast'></i>Public Relation</a></li>
            </ul>
            <li><a href="#"><i class='bx bx-cog'></i>Settings</a></li>`
        </ul>

        <ul class="side-menu">
            <li>
                <a href="#" class="logout" onclick="logout()"><i class='bx bx-log-out-circle'></i> Logout </a>
            </li>
        </ul>
    </div>
    <!-- End of Sidebar -->
    <!-- Main Content -->
    <div class="content">
        <!-- Navbar -->
        <nav> <i class='bx bx-menu'></i>
            <form action="#">
                <div class="form-input">
                    <!-- <input type="search" placeholder="Search..."> -->
                    <button style="background-color: transparent; color: #1976d2; width: fit-content;">Hi , <span id="name"> Name</span></button> </div>
            </form> <input type="checkbox" id="theme-toggle" hidden>
            <!-- <label for="theme-toggle" class="theme-toggle"></label> -->
            <a href="#" class="notif"> <i class='bx bx-bell'></i> <span class="count">12</span> </a>
            <!-- <a href="#" class="profile"> <img src="images/logo.png"> </a> --></nav>
        <!-- End of Navbar -->
        <main>
            <div class="header">
                <div class="left">
                    <h1>Dashboard</h1>
                    <ul class="breadcrumb">
                        <li><a href="#"> Analytics </a></li> /
                        <li><a href="#" class="active">Shop</a></li>
                    </ul>
                </div>
                <a href="#" class="report"> <i class='bx bxs-add-to-queue'></i> <span id="changes">Add</span> <i class='bx bxs-x-circle' style="display: none;"></i> </a>
            </div> <br>
            <!-- code from here -->


            <div class="flex justify-center items-center" id="msgok" style="display: none;">
                <div class="flex flex-col gap-2 w-60 sm:w-72 text-[10px] sm:text-xs z-50">
                    <div class="success-alert cursor-default flex items-center justify-between w-full h-12 sm:h-14 rounded-lg bg-[#232531] px-[10px]">
                        <div class="flex gap-2">
                            <div class="text-[#2b9875] bg-white/5 backdrop-blur-xl p-1 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5"></path>
                                </svg>
                            </div>
                            <div>
                                <p class="text-white">Activated successfully :)</p>
                                <p class="text-gray-500" id="Msg">User activated</p>
                            </div>
                        </div>
                        <button class="text-gray-600 text-gray-600 hover:bg-white/5 p-1 rounded-md transition-colors ease-linear">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="mx-4 md:mx-14 mt-10 border-2 border-black bg-white bg-opacity-90 rounded-lg relative" id="formcontent">
                <form onsubmit="createvent(event)">
                    <div class="mt-6 md:mt-10 text-center font-bold text-lg md:text-xl">Add Event Details</div>
                    <div class="p-4 md:p-8">
                        <div class="flex flex-col md:flex-row gap-4">
                            <input type="text" name="event_name" id="event_name_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Event Name *" required />
                            <input type="text" name="sport_name" id="sport_name_input" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Sport Name *" required readonly>


                            </select>
                        </div>
                        <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                            <select name="category" id="category" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                required>
                                <option value="" disabled selected>Select Category</option>
                                <option value="UG">UG</option>
                                <option value="PG">PG</option>
                                <option value="UG & PG">UG AND PG</option>
                            </select>
                            <select name="gender" id="gender_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                required>
                                <option value="" disabled selected>Select Gender</option>
                                <option value="Boys">Boys</option>
                                <option value="Girls">Girls</option>
                                <option value="Boys and Girls">Boys and Girls</option>
                            </select>
                        </div>
                        <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                            <input type="text" name="event_date" id="event_date_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Event Date and Time" required />
                            <select name="event_type" id="event_type_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                required>
                                <option value="" disabled selected>Select Event Type</option>
                                <option value="0">Individual</option>
                                <option value="1">Team</option>
                            </select>
                        </div>
                        <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">

                            <input type="text" name="last_date" id="last_date_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Last date for register" required />
                            <input type="number" name="entry_fee" id="entry_fee_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Entry Fee" required />
                            <input type="number" name="no_of_prizes" id="no_of_prizes_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Number of Prizes" required />
                        </div>
                        <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                            <input type="text" name="location" id="location_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Location" required />
                            <input type="text" name="form_link" id="form_link_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Form Link" required />
                        </div>
                        <div class="mb-4 md:mb-10">
                            <textarea name="event_description" id="event_description_edit" cols="30" rows="5" class="resize-none mt-4 w-full rounded-md border border-gray-300 p-2 sm:p-5 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Event Description" required></textarea>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="cursor-pointer rounded-lg bg-purple-700 px-6 py-2 sm:py-3 text-sm font-semibold text-white mr-4">Add Event</button>
                        </div>
                    </div>
                </form>
            </div>



            <br>
            <div class="relative min-h-screen bg-gray-100 dark:bg-gray-900" id="seprate">
                <section class="container px-4 mx-auto">
                    <div class="sm:flex sm:items-center sm:justify-between"> </div>
                    <!-- Buttons for toggling sections -->
                    <div class="mt-6 md:flex md:items-center md:justify-between">
                        <div class="inline-flex overflow-hidden bg-white border divide-x rounded-lg dark:bg-gray-900 rtl:flex-row-reverse dark:border-gray-700 dark:divide-gray-700">
                            <button id="viewAllSectionBtn" class="toggle-btn px-5 py-2 text-xs font-medium text-gray-600 transition-colors duration-200 sm:text-sm dark:hover:bg-gray-800 dark:text-gray-300 hover:bg-gray-100"> Events </button>
                            <button id="monitoredSectionBtn" class="toggle-btn px-5 py-2 text-xs font-medium text-gray-600 transition-colors duration-200 sm:text-sm dark:hover:bg-gray-800 dark:text-gray-300 hover:bg-gray-100"> Pendings </button>
                            <button id="unmonitoredSectionBtn" class="toggle-btn px-5 py-2 text-xs font-medium text-gray-600 transition-colors duration-200 sm:text-sm dark:hover:bg-gray-800 dark:text-gray-300 hover:bg-gray-100"> History </button>
                        </div>
                    </div>
                    <!-- Sections to toggle visibility -->
                    <div id="viewAllSection" class="flex flex-col mt-6">



                        <div class="displayevents" id="displayevents">
                            <!-- card start here -->

                            <div class="showcards">
                                <div class="bg-gray-100 dark:bg-gray-900" style="padding-top: 40px; " id="showcards">
                                    <!-- Card Container -->
                                    <!-- showevent -->

                                    <div id="card-container" class="max-w-5xl mx-auto">
                                        <!-- Card 1 -->
                                        <div class="card px-8 py-4 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800 container-glow">
                                            <div class="flex items-center justify-between">
                                                <div class="date-time-container">
                                                    <h3 id="date">Mar 10, 2019</h3>
                                                    <h4><i class="bi bi-clock icon"></i> <span id="time"> 12:00pm </span></h4>
                                                </div> <a class="px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-300 transform bg-purple-600 rounded cursor-pointer hover:bg-violet-500" tabindex="0" role="button" id="occurs">Upcoming</a>                                                </div>
                                            <div class="mt-2"> <a href="#" class="text-xl font-bold text-gray-700 dark:text-white hover:text-gray-600 dark:hover:text-gray-200 hover:underline" tabindex="0" role="link" id="event_name">Accessibility tools for designers and developers</a>
                                                <div class="mt-2 text-gray-600 dark:text-gray-300">
                                                    <div class="overflow-x-auto">
                                                        <table class="min-w-full table-auto">
                                                            <tbody>
                                                                <tr>
                                                                    <td class="px-4 py-2">
                                                                        <div class="td-content"> <i class="bi bi-book icon"></i> <span id="category">BTech / MTech</span> </div>
                                                                    </td>
                                                                    <td class="px-4 py-2">
                                                                        <div class="td-content"> <i class="bi bi-gender-ambiguous icon"></i> <span id="gender">Male / Female </span> </div>
                                                                    </td>
                                                                    <td class="px-4 py-3">
                                                                        <div class="td-content"> Entry fee <i class="bi bi-currency-rupee"></i> <span id="entry_fee"> 10 </span> </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="px-4 py-2">
                                                                        <div class="td-content"> <i class="bi bi-people icon"></i> <span id="is_team"> Group / Individual </span> </div>
                                                                    </td>
                                                                    <td class="px-4 py-2">
                                                                        <div class="td-content"> <i class="bi bi-geo-alt icon"></i>AB3 </div>
                                                                    </td>
                                                                    <td class="px-4 py-2">
                                                                        <div class="td-content"> <i class="bi bi-award icon"></i><span id="prize"> 3</span> </div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flex items-center justify-between mt-4"> <a href="#" class="toggleReadMore text-blue-600 dark:text-blue-400 hover:underline" tabindex="0" role="link">Read more</a>
                                                <div class="flex items-center"> <span class="chess-link font-bold text-gray-700 cursor-pointer dark:text-gray-200" tabindex="0" role="link"> Chess </span> </div>
                                            </div>
                                            <div class="readMoreContent mt-4 readmore">
                                                <p class="desc" id="description">Description for the first card.</p>
                                                <div class="flex items-center justify-between mt-4"> <a href="" id="form" target="_blank" class="font-bold text-violet-700 cursor-pointer dark:text-gray-200" tabindex="0" role="link">Form link</a>
                                                    <div class="flex items-center">
                                                        <button class="ml-2 bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-8 rounded-full" id="editbutton" onclick="showEditForm()"> Edit </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>




                                    </div>



                                </div>

                            </div>




                        </div>




                    </div>



                    <div id="monitoredSection" class="flex flex-col mt-6 hidden">

                        <div class="displayallmembers" id="displayallmembers">

                            <table class="min-w-full divide-y divide-gray-200 overflow-x-auto">
                                <thead class="bg-blue-100">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Name </th>
                                        <!-- <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Title </th> -->
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Sports </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Event name</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Date </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Catagorey </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Status </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Actions </th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200" id="displayusers">
                                    <!-- displaycreateeventuser -->
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10"> <img class="h-10 w-10 rounded-full" src="../img/blog.jpg" alt=""> </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900" id="name_show"> Abinesh </div>
                                                    <div class="text-sm text-gray-500" id="roll_no_show"> cb.en.u4cse21302 </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap"> <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800" id="sport_name_show">  Chess </span> </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" id="event_name_show">
                                            selection
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900" id="event_date_show"> YYYY-MM-DD </div>
                                                <div class="text-sm text-gray-500" id="event_time_show"> HH:MM </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900" id="catagory_show"> UG and PG</div>
                                                <div class="text-sm text-gray-500" id="gender_show"> boys and girls</div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap"> <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"> Pending </span> </td>
                                        <td class="px-6 py-4 whitespace-nowrap  text-sm font-medium">
                                            <a href="#" class="text-indigo-600 hover:text-indigo-900" id="editbutton" onclick="showEditFormallmember()">view</a><a href="#" class="ml-2 text-red-600 hover:text-red-900" id="deactivate" onclick="deactivate()">Delete</a>

                                        </td>
                                    </tr>


                                    <!-- More rows... -->
                                </tbody>
                            </table>
                        </div>




                        <div class="mx-4 md:mx-14 mt-10 bg-white bg-opacity-90 rounded-lg relative" id="allmember" style="display: none;"> <button class="absolute top-2 right-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full flex items-center" onclick="closeFormallmember()"> <span class="mr-1">Close</span> <i class='bx bxs-x-circle'></i> </button>
                            <div class="mt-6 md:mt-10 text-center font-bold text-lg md:text-xl"></div> <br>
                            <div id="card-container" class="max-w-5xl mx-auto">
                                <!-- Card 1 -->
                                <!-- one card display -->
                                <div class="card px-8 py-4 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800 container-glow">
                                    <div class="flex items-center justify-between">
                                        <div class="date-time-container">
                                            <h3 id="date_display">Mar 10, 2019</h3>
                                            <h4><i class="bi bi-clock icon"></i> <span id="time_display"> 12:00pm </span></h4>
                                        </div> <a class="px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-300 transform bg-purple-600 rounded cursor-pointer hover:bg-violet-500" tabindex="0" role="button" id="occurs_display">Upcoming</a>                                        </div>
                                    <div class="mt-2"> <a href="#" class="text-xl font-bold text-gray-700 dark:text-white hover:text-gray-600 dark:hover:text-gray-200 hover:underline" tabindex="0" role="link" id="event_name_display">Accessibility tools for designers and developers</a>
                                        <div class="mt-2 text-gray-600 dark:text-gray-300">
                                            <div class="overflow-x-auto">
                                                <table class="min-w-full table-auto">
                                                    <tbody>
                                                        <tr>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-book icon"></i> <span id="category_display">BTech / MTech</span> </div>
                                                            </td>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-gender-ambiguous icon"></i> <span id="gender_display">Male / Female </span> </div>
                                                            </td>
                                                            <td class="px-4 py-3">
                                                                <div class="td-content"> Entry fee <i class="bi bi-currency-rupee"></i> <span id="entry_fee_display"> 10 </span> </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-people icon"></i> <span id="is_team_display"> Group / Individual </span> </div>
                                                            </td>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-geo-alt icon"></i><span id="location_display"> 3</span> </div>
                                                            </td>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-award icon"></i><span id="prize_display"> 3</span> </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between mt-4"> <a href="#" class="toggleReadMore text-blue-600 dark:text-blue-400 hover:underline" tabindex="0" role="link">Read more</a>
                                        <div class="flex items-center"> <span class="chess-link font-bold text-gray-700 cursor-pointer dark:text-gray-200" tabindex="0" role="link" id="sport_name_display"> Chess </span> </div>
                                    </div>
                                    <div class="readMoreContent mt-4 readmore">
                                        <p class="desc" id="description_display">Description for the first card.</p>
                                        <div class="flex items-center justify-between mt-4"> <a href="link_display" id="form" target="_blank" class="font-bold text-violet-700 cursor-pointer dark:text-gray-200" tabindex="0" role="link">Form link</a>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mx-4 md:mx-14 mt-10 border-2 border-black bg-white bg-opacity-90 rounded-lg relative" id="editvent" style="display: none;">
                            <button class="absolute top-2 right-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full flex items-center" onclick="closeForm()"> 
                            <span class="mr-1">Close</span> <i class='bx bxs-x-circle'></i> 
                        </button>
                            <div class="mt-6 md:mt-10 text-center font-bold text-lg md:text-xl">Edit Event Details</div>
                            <div class="p-4 md:p-8">
                                <div class="flex flex-col md:flex-row gap-4">
                                    <input type="text" name="event_name" id="spec_event_name_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                        placeholder="Event Name *" />
                                    <input type="text" name="sports" id="spec_sports_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                        placeholder="Sports" readonly> </div>
                                <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                                    <select name="category" id="spec_category_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"> 
                                        <option value="" disabled selected>Select Category</option>
                                        <option value="UG">UG</option>
                                        <option value="PG">PG</option>
                                        <option value="UG & PG">UG AND PG</option>
                                         </select>
                                    <select name="gender" id="spec_gender_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"> 
                                        <option value="" disabled selected>Select Gender</option>
                                         <option value="Boys">Boys</option> <option value="Girls">Girls</option> 
                                         <option value="Boys and Girls">Boys and Girls</option> 
                                        </select>
                                </div>
                                <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                                    <input type="date" name="event_date" id="spec_event_date_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                        placeholder="Event Date" />
                                    <input type="text" name="time" id="spec_time_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                        placeholder="Time" /> </div>
                                <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                                    <select name="event_type" id="spec_event_type_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm">
                                         <option value="" disabled selected>Select Event Type</option>
                                          <option value="Individual">Individual</option>
                                           <option value="Team">Team</option>
                                         </select>
                                    <input type="text" name="location" id="spec_location_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                        placeholder="Location" /> </div>
                                <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                                    <input type="text" name="entry_fee" id="spec_entry_fee_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                        placeholder="Entry Fee" />
                                    <input type="text" name="no_of_prizes" id="spec_no_of_prizes_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                        placeholder="Number of Prizes" /> </div>
                                <div class="mb-4 md:mb-10">
                                    <input type="text" name="form_link" id="spec_form_link_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                        placeholder="Form Link" />
                                    <textarea name="event_description" id="spec_event_description_edit" cols="30" rows="5" class="resize-none mt-4 w-full rounded-md border border-gray-300 p-2 sm:p-5 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                        placeholder="Event Description"></textarea> </div>
                                <div class="text-center"> <button type="button" class="cursor-pointer rounded-lg bg-purple-700 px-6 py-2 sm:py-3 text-sm font-semibold text-white mr-4" onclick="updateEvent()">Update Event</button> <button type="button" class="cursor-pointer rounded-lg bg-red-700 px-6 py-2 sm:py-3 text-sm font-semibold text-white"
                                        onclick="deleteEvent()">Delete</button> </div>
                            </div>
                        </div> <br><br>

                        <div id="deactivateModal" class="modal fixed inset-0 z-10 flex items-center justify-center overflow-y-auto hidden">
                            <!-- Modal content -->
                            <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4 sm:my-8 sm:w-full sm:max-w-lg rounded-lg shadow-xl">
                                <!-- Modal header -->
                                <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                                    <!-- Header content -->
                                    <div class="sm:flex sm:items-start">
                                        <!-- Icon -->
                                        <div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                                            <svg aria-hidden="true" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" fill="none" class="h-6 w-6 text-red-600">
                                                <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" stroke-linejoin="round" stroke-linecap="round"></path>
                                            </svg>
                                        </div>
                                        <!-- Modal title and description -->
                                        <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                                            <h3 id="modal-title" class="text-base font-semibold leading-6 text-gray-900">
                                                Delete Event
                                            </h3>
                                            <div class="mt-2">
                                                <p class="text-sm text-gray-500">
                                                    Are you sure you want to delete the event before it get approve ?
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Modal footer with buttons -->
                                <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                                    <button id="deactivateBtn" class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto" type="button">
                                        Deactivate
                                    </button>
                                    <button id="deactivateCancel" onclick="closedeactivate()" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" type="button">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>


                    <div id="unmonitoredSection" class="flex flex-col mt-6 hidden">


                        <div class="decliend" id="decliend">

                            <table class="min-w-full divide-y divide-gray-200 overflow-x-auto">
                                <thead class="bg-blue-100">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Name </th>
                                        <!-- <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Title </th> -->
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Sports </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Event name</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Date </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Catagorey </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Status </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Actions </th>
                                    </tr>
                                </thead>

                                <tbody class="bg-white divide-y divide-gray-200" id="displayallevnt">
                                    <!-- displaycreateeventist -->
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10"> <img class="h-10 w-10 rounded-full" src="../img/blog.jpg" alt=""> </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900" id="name_show"> Abinesh </div>
                                                    <div class="text-sm text-gray-500" id="roll_no_show"> cb.en.u4cse21302 </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap"> <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800" id="sport_name_show">  Chess </span> </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" id="event_name_show">
                                            selection
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900" id="event_date_show"> YYYY-MM-DD </div>
                                                <div class="text-sm text-gray-500" id="event_time_show"> HH:MM </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900" id="catagory_show"> UG and PG</div>
                                                <div class="text-sm text-gray-500" id="gender_show"> boys and girls</div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap"> <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"> Pending </span> </td>
                                        <td class="px-6 py-4 whitespace-nowrap  text-sm font-medium">
                                            <a href="#" class="text-indigo-600 hover:text-indigo-900" id="editbutton" onclick="showdecineForm()">view</a><a href="#" class="ml-2 text-red-600 hover:text-red-900" id="deactivate" onclick="deactivate()">Delete</a>

                                        </td>
                                    </tr>

                                    <!-- More rows... -->
                                </tbody>
                            </table>
                        </div>



                        <div class="mx-4 md:mx-14 mt-10 bg-white bg-opacity-90 rounded-lg relative" id="decliendcard" style="display: none;"> <button class="absolute top-2 right-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full flex items-center" onclick="closedecline()"> <span class="mr-1">Close</span> <i class='bx bxs-x-circle'></i> </button>
                            <div class="mt-6 md:mt-10 text-center font-bold text-lg md:text-xl"></div> <br>
                            <div id="card-container" class="max-w-5xl mx-auto">
                                <!-- Card 1 -->
                                <div class="card px-8 py-4 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800 container-glow">
                                    <div class="flex items-center justify-between">
                                        <div class="date-time-container">
                                            <h3 id="date_display_second">Mar 10, 2019</h3>
                                            <h4><i class="bi bi-clock icon"></i> <span id="time_display_second"> 12:00pm </span></h4>
                                        </div>
                                        <a class="px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-300 transform bg-purple-600 rounded cursor-pointer hover:bg-violet-500" tabindex="0" role="button" id="occurs_display_second">Upcoming</a>
                                    </div>
                                    <div class="mt-2">
                                        <a href="#" class="text-xl font-bold text-gray-700 dark:text-white hover:text-gray-600 dark:hover:text-gray-200 hover:underline" tabindex="0" role="link" id="event_name_display_second">Accessibility tools for designers and developers</a>
                                        <div class="mt-2 text-gray-600 dark:text-gray-300">
                                            <div class="overflow-x-auto">
                                                <table class="min-w-full table-auto">
                                                    <tbody>
                                                        <tr>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-book icon"></i> <span id="category_display_second">BTech / MTech</span> </div>
                                                            </td>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-gender-ambiguous icon"></i> <span id="gender_display_second">Male / Female </span> </div>
                                                            </td>
                                                            <td class="px-4 py-3">
                                                                <div class="td-content"> Entry fee <i class="bi bi-currency-rupee"></i> <span id="entry_fee_display_second"> 10 </span> </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-people icon"></i> <span id="is_team_display_second"> Group / Individual </span> </div>
                                                            </td>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-geo-alt icon"></i><span id="location_display_second"> 3</span> </div>
                                                            </td>
                                                            <td class="px-4 py-2">
                                                                <div class="td-content"> <i class="bi bi-award icon"></i><span id="prize_display_second"> 3</span> </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between mt-4">
                                        <a href="#" class="toggleReadMore text-blue-600 dark:text-blue-400 hover:underline" tabindex="0" role="link">Read more</a>
                                        <div class="flex items-center">
                                            <span class="chess-link font-bold text-gray-700 cursor-pointer dark:text-gray-200" tabindex="0" role="link" id="sport_name_display_second"> Chess </span>
                                        </div>
                                    </div>
                                    <div class="readMoreContent mt-4 readmore">
                                        <p class="desc" id="description_display_second">Description for the first card.</p>
                                        <div class="flex items-center justify-between mt-4">
                                            <a href="" id="form_second" target="_blank" class="font-bold text-violet-700 cursor-pointer dark:text-gray-200" tabindex="0" role="link">Form link</a>
                                        </div>
                                    </div>
                                </div>



                            </div>
                        </div>




                    </div>



                </section>
            </div>
        </main>
    </div>
    <script src="./js/event.js"></script>
    <script src="./js/index.js"></script>
</body>

</html>
<style>
    [x-cloak] {
        display: none
    }
</style>
<script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
        darkMode: 'class',
    }
</script>
<script src="//unpkg.com/alpinejs" defer></script>
<script>
    async function showEditFormallmember(event_id) {
        // Hide the element with id="displayallmembers"
        var displayAllMembers = document.getElementById('displayallmembers');
        if (displayAllMembers) {
            displayAllMembers.style.display = 'none';
        }

        // Show the form with id="allmember"
        var editForm = document.getElementById('allmember');
        if (editForm) {
            editForm.style.display = 'block';
        }


        try {
            const response = await fetch('http://localhost:3000/api/displayeventfilternnotapproved', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    event_id: event_id
                })
            });

            if (!response.ok) {
                throw new Error('Failed to fetch event details');
            }

            const {
                success,
                event
            } = await response.json();
            console.log("all eve", event)
            if (success && event) {

                // Populate form fields// Assuming event_date is a string representing the date in ISO format (e.g., '2024-07-06T12:00:00Z')
                const eventDate = new Date(event.event_date);

                // Get today's date
                const currentDate = new Date();

                // Compare dates
                if (eventDate > currentDate) {
                    document.getElementById('occurs_display').textContent = 'Upcoming';
                } else {
                    document.getElementById('occurs_display').textContent = 'Completed';
                }


                document.getElementById('date_display').textContent = event.event_date ? new Date(event.event_date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                }) : '';
                document.getElementById('time_display').textContent = event.event_time || '';
                document.getElementById('event_name_display').textContent = event.event_name || '';
                document.getElementById('sport_name_display').textContent = event.sport_name || '';
                document.getElementById('category_display').textContent = event.category || '';
                document.getElementById('gender_display').textContent = event.gender || '';
                document.getElementById('entry_fee_display').textContent = event.entry_fee || '';
                document.getElementById('is_team_display').textContent = event.is_team ? 'Team' : 'Individual';

                document.getElementById('location_display').textContent = event.place || '';
                document.getElementById('prize_display').textContent = event.no_of_prize || '';
                document.getElementById('description_display').textContent = event.event_description || '';
                document.getElementById('form').setAttribute('href', event.form_link || ''); // Update href attribute for link

            } else {
                throw new Error('Event data not found');
            }

        } catch (error) {
            console.error('Error fetching or populating event data:', error);
            // Handle error appropriately (e.g., show error message)
        }
    }

    function closeFormallmember() {
        // Show the element with id="displayevents"
        var displayEvents = document.getElementById('displayallmembers');
        if (displayEvents) {
            displayEvents.style.display = 'block';
        }

        // Hide the form with id="allmember"
        var editForm = document.getElementById('allmember');
        if (editForm) {
            editForm.style.display = 'none';
        }
    }
</script>



<script>
    async function showdecineForm(event_id) {

        var displayEvents = document.getElementById('decliend');
        if (displayEvents) {
            displayEvents.style.display = 'none';
        }

        var editForm = document.getElementById('decliendcard');
        if (editForm) {
            editForm.style.display = 'block';
        }

        try {
            const response = await fetch('http://localhost:3000/api/displayeventfilterall', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    event_id: event_id
                })
            });

            if (!response.ok) {
                throw new Error('Failed to fetch event details');
            }

            const {
                success,
                event
            } = await response.json();
            console.log('Fetched event:', event); // Check the event object in console

            if (success && event) {
                const eventDate = new Date(event.event_date);
                const currentDate = new Date();

                if (event.approval_status == 1) {
                    if (eventDate > currentDate) {
                        document.getElementById('occurs_display_second').textContent = 'Upcoming';
                    } else {
                        document.getElementById('occurs_display_second').textContent = 'Completed';
                    }
                } else {
                    document.getElementById('occurs_display_second').textContent = 'Declined';
                }

                document.getElementById('date_display_second').textContent = event.event_date ? new Date(event.event_date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                }) : '';
                document.getElementById('time_display_second').textContent = event.event_time || '';
                document.getElementById('event_name_display_second').textContent = event.event_name || '';
                document.getElementById('sport_name_display_second').textContent = event.sport_name || '';
                document.getElementById('category_display_second').textContent = event.category || '';
                document.getElementById('gender_display_second').textContent = event.gender || '';
                document.getElementById('entry_fee_display_second').textContent = event.entry_fee || '';
                document.getElementById('is_team_display_second').textContent = event.is_team ? 'Team' : 'Individual';
                document.getElementById('location_display_second').textContent = event.place || '';
                document.getElementById('prize_display_second').textContent = event.no_of_prize || '';
                document.getElementById('description_display_second').textContent = event.event_description || ''; // Make sure event_description is correctly assigned
                document.getElementById('form_second').setAttribute('href', event.form_link || ''); // Update href attribute for link

            } else {
                throw new Error('Event data not found');
            }

        } catch (error) {
            console.error('Error fetching or populating event data:', error);
            // Handle error appropriately (e.g., show error message)
        }
    }


    function closedecline() {
        // Show the element with id="displayevents"
        var displayEvents = document.getElementById('decliend');
        if (displayEvents) {
            displayEvents.style.display = 'block';
        }

        // Hide the form with id="allmember"
        var editForm = document.getElementById('decliendcard');
        if (editForm) {
            editForm.style.display = 'none';
        }
    }
</script>



<script>
    function logout() {
        // Remove token from local storage
        localStorage.removeItem('token');

        // Redirect to index.html
        window.location.href = '../login/login.html';
    }
</script>

<script>
    let roll_no;
    let name;
    let token;
    let sport_name;


    async function decodeToken() {
        try {
            token = localStorage.getItem('token');
            console.log('Token from localStorage:', token);

            if (!token) {
                console.error('Token not found in local storage');
                window.location.href = '../login/login.html';
                return;
            }

            const response = await fetch('http://localhost:3000/api/decodeToken', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    token: token
                })
            });

            if (response.ok) {
                const data = await response.json();
                console.log('Decoded token data:', data);

                roll_no = data.roll_no;
                name = data.name;
                role_id = data.role_id

                if (data.is_active === 1) {
                    if (data.role_id != 0) {
                        console.log("Hello admin");

                        // Assuming you have an element with id 'name' to display user name
                        const nameElement = document.getElementById('name');
                        if (nameElement) {
                            nameElement.textContent = name
                        }

                        displayuser(roll_no);


                    } else {
                        window.location.href = '../Admin Dashboard/dashboard.html';
                    }
                } else {
                    console.error('User is not active');
                    window.location.href = '../login/login.html';
                }
            } else {
                console.error('Failed to decode token:', response.statusText);
            }
        } catch (error) {
            console.error('Error in decodeToken:', error.message);
            window.location.href = '../login/login.html';
        }
    }


    async function displayuser(roll_no) {
        try {
            const response = await fetch('http://localhost:3000/api/displaymem', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    roll_no: roll_no
                })
            });

            if (!response.ok) {
                throw new Error('Failed to fetch user data');
            }

            const responseData = await response.json();
            console.log('User data:', responseData);

            const sportName = responseData[0].sport_name; // Assuming you want the sport_name from the first object
            sport_name = sportName

            document.getElementById('sport_name_input').value = sportName;

            showevent(sportName);
            displaycreateeventuser(sportName)
            displaycreateeventist(sportName)

        } catch (error) {
            console.error('Error fetching and displaying user data:', error);
            throw error; // Re-throw the error to propagate it further if needed
        }
    }



    async function createvent(event) {
        event.preventDefault(); // Prevent the form from submitting normally

        const event_name = document.getElementById('event_name_edit').value;
        const sport_name = document.getElementById('sport_name_input').value;
        const category = document.getElementById('category').value;
        const gender = document.getElementById('gender_edit').value;
        const event_date = document.getElementById('event_date_edit').value;
        const last_date = document.getElementById('last_date_edit').value;
        const is_team = document.getElementById('event_type_edit').value;
        const location = document.getElementById('location_edit').value;
        const entry_fee = document.getElementById('entry_fee_edit').value;
        const no_of_prizes = document.getElementById('no_of_prizes_edit').value;
        const form_link = document.getElementById('form_link_edit').value;
        const event_description = document.getElementById('event_description_edit').value;

        // Split event_date assuming format is "dd:mm:yyyy hh:mm"
        const eventDateParts = event_date.split(' ');
        const datePart = eventDateParts[0].substr(3);
        const timePart = eventDateParts[1];

        // Split last_date assuming format is "dd:mm:yyyy hh:mm"
        const lastDateParts = last_date.split(' ');
        const last_date_part = lastDateParts[0].substr(3);

        // Get current date
        const currentDate = new Date();
        const currentYear = currentDate.getFullYear();
        let currentMonth = currentDate.getMonth() + 1; // getMonth() returns 0-based index
        let currentDay = currentDate.getDate();

        // Pad month and day with leading zeros if necessary
        if (currentMonth < 10) {
            currentMonth = '0' + currentMonth;
        }
        if (currentDay < 10) {
            currentDay = '0' + currentDay;
        }

        // Format the current date as yyyy-mm-dd
        const formattedCurrentDate = `${currentYear}-${currentMonth}-${currentDay}`;


        console.log(roll_no)

        // Create an object with the form data including current date
        const formData = {
            event_name,
            sport_name,
            category,
            gender,
            date: datePart,
            time: timePart,
            created_date: formattedCurrentDate,
            is_team,
            location,
            entry_fee,
            no_of_prizes,
            form_link,
            event_description,
            last_date: last_date_part,
            roll_no
        };

        console.log(formData)

        try {
            // Send a POST request to add event
            const response = await fetch(' http://localhost:3000/api/addevent', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(formData) // Send form data in the request body
            });

            if (!response.ok) {
                throw new Error('Failed to add event');
            }

            // Log success message from API response
            const data = await response.json(); // Parse JSON response
            console.log('Event added successfully:', data.message);
            const successMsg = document.getElementById('msgok');
            const message = data.message; // Extract message from response
            document.getElementById('Msg').textContent = message; // Update message content dynamically


            successMsg.style.display = 'flex';
            setTimeout(function() {
                successMsg.style.display = 'none';
            }, 3000); // Hide after 3 seconds




            // Close the modal


            displaycreateeventuser(sport_name)
                // Optionally, reset the form after successful submission
            event.target.reset();
        } catch (error) {
            console.error('Error adding event:', error);
            // Handle error appropriately (e.g., show error message to user)
        }
    }

    async function displaycreateeventuser(sportName) {
        try {
            console.log(sportName); // Logging the sportName for debugging

            // Assuming `token` is defined somewhere earlier in your code
            const response = await fetch('http://localhost:3000/api/createdevent', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    sport_name: sportName // Sending sportName in the request body
                })
            });

            if (!response.ok) {
                throw new Error('Failed to fetch user data');
            }

            const responseData = await response.json();
            console.log('responseData:', responseData); // Logging the response data for debugging

            const {
                success,
                sport_name,
                events
            } = responseData;

            if (!success) {
                throw new Error('API request not successful');
            }

            // Assuming your table body element has id 'displayusers'
            const displayUsersTable = document.getElementById('displayusers');
            displayUsersTable.innerHTML = '';

            events.forEach(event => {
                // Parse event_date and created_date
                const eventDate = new Date(event.event_date);
                const createdDate = new Date(event.created_date);

                // Format event_date to YYYY-MM-DD
                const formattedEventDate = eventDate.toISOString().split('T')[0]; // Extract YYYY-MM-DD

                // Format created_date to dd-mm-yyyy
                const day = createdDate.getUTCDate().toString().padStart(2, '0');
                const month = (createdDate.getUTCMonth() + 1).toString().padStart(2, '0'); // Months are zero-indexed
                const year = createdDate.getUTCFullYear().toString();

                const formattedCreatedDate = `${day}-${month}-${year}`;

                const row = document.createElement('tr');
                row.innerHTML = `
        <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
                <div class="flex-shrink-0 h-10 w-10"> <img class="h-10 w-10 rounded-full" src="../img/blog.jpg" alt=""> </div>
                <div class="ml-4">
                    <div class="text-sm font-medium text-gray-900" id="name_show">${event.name}</div>
                    <div class="text-sm text-gray-500" id="roll_no_show">${event.roll_no}</div>
                </div>
            </div>
        </td>
        <td class="px-6 py-4 whitespace-nowrap"> <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">${sport_name}</span> </td>
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
            <div class="ml-4">
                <div class="text-sm font-medium text-gray-900" id="event_name_show">${event.event_name}</div>
                <div class="text-sm text-gray-500" id="event_category_show">${event.is_team ? 'Team' : 'Individual'}</div>
            </div>
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
            <div class="ml-4">
                <div class="text-sm font-medium text-gray-900" id="event_date_show">${formattedEventDate}</div>
                <div class="text-sm text-gray-500" id="event_time_show">${event.event_time}</div>
            </div>
        </td>
        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
            <div class="ml-4">
                <div class="text-sm font-medium text-gray-900" id="category_show">${event.category}</div>
                <div class="text-sm text-gray-500" id="gender_show">${event.gender}</div>
            </div>
        </td>
        <td class="px-6 py-4 whitespace-nowrap"> <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Pending</span> </td>
        <td class="px-6 py-4 whitespace-nowrap  text-sm font-medium">
       <a href="#" class="text-indigo-600 hover:text-indigo-900" id="editbutton" onclick="showEditFormallmember(${event.event_id})">view</a>
     
        </td>
    `;
                displayUsersTable.appendChild(row);
            });

        } catch (error) {
            console.error('Error fetching and displaying user data:', error);
            throw error; // Re-throw the error to propagate it further if needed
        }
    }


    async function displaycreateeventist(sportName) {
        try {
            console.log(sportName); // Logging the sportName for debugging

            // Assuming `token` is defined somewhere earlier in your code
            const response = await fetch('http://localhost:3000/api/createdeventhist', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    sport_name: sportName // Sending sportName in the request body
                })
            });

            if (!response.ok) {
                throw new Error('Failed to fetch user data');
            }

            const responseData = await response.json();
            console.log('responseData:', responseData); // Logging the response data for debugging

            const {
                success,
                sport_name,
                events
            } = responseData;

            if (!success) {
                throw new Error('API request not successful');
            }

            // Assuming your table body element has id 'displayusers'
            const displayUsersTable = document.getElementById('displayallevnt');
            displayUsersTable.innerHTML = '';

            events.forEach(event => {
                // Parse event_date and created_date
                const eventDate = new Date(event.event_date);
                const createdDate = new Date(event.created_date);

                // Format event_date to YYYY-MM-DD
                const formattedEventDate = eventDate.toISOString().split('T')[0]; // Extract YYYY-MM-DD

                // Format created_date to dd-mm-yyyy
                const day = createdDate.getUTCDate().toString().padStart(2, '0');
                const month = (createdDate.getUTCMonth() + 1).toString().padStart(2, '0'); // Months are zero-indexed
                const year = createdDate.getUTCFullYear().toString();

                const formattedCreatedDate = `${day}-${month}-${year}`;

                let approvalStatusText, statusClass;
                if (event.approval_status === 1) {
                    approvalStatusText = 'Accepted';
                    statusClass = 'bg-green-100 text-green-800'; // Green color
                } else if (event.approval_status === 2) {
                    approvalStatusText = 'Declined';
                    statusClass = 'bg-red-100 text-red-800'; // Red color
                } else {
                    // Handle other cases if needed
                    approvalStatusText = 'Unknown'; // Or some default status
                    statusClass = 'bg-gray-100 text-gray-800'; // Default color
                }

                const row = document.createElement('tr');
                row.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 h-10 w-10"> <img class="h-10 w-10 rounded-full" src="../img/blog.jpg" alt=""> </div>
                        <div class="ml-4">
                            <div class="text-sm font-medium text-gray-900" id="name_show">${event.name}</div>
                            <div class="text-sm text-gray-500" id="roll_no_show">${event.roll_no}</div>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"> <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">${sport_name}</span> </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900" id="event_name_show">${event.event_name}</div>
                        <div class="text-sm text-gray-500" id="event_category_show">${event.is_team ? 'Team' : 'Individual'}</div>
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900" id="event_date_show">${formattedEventDate}</div>
                        <div class="text-sm text-gray-500" id="event_time_show">${event.event_time}</div>
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900" id="category_show">${event.category}</div>
                        <div class="text-sm text-gray-500" id="gender_show">${event.gender}</div>
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap"> <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">${approvalStatusText}</span> </td>
                <td class="px-6 py-4 whitespace-nowrap  text-sm font-medium">
            <a href="#" class="text-indigo-600 hover:text-indigo-900" id="editbutton"  onclick="showdecineForm(${event.event_id})"">view</a>
                </td>
            `;
                displayUsersTable.appendChild(row);
            });


        } catch (error) {
            console.error('Error fetching and displaying user data:', error);
            throw error; // Re-throw the error to propagate it further if needed
        }
    }





    async function deactivate() {
        // Show the modal
        var modal = document.getElementById('deactivateModal');
        modal.classList.remove('hidden');
        modal.classList.add('flex');

        // Log the roll_no to console
        // console.log(`Deactivate button clicked for roll_no: ${roll_no}`);

        // // Add an event listener to the Deactivate button inside the modal
        // var deactivateBtn = document.getElementById('deactivateBtn');


        // deactivateBtn.addEventListener('click', async function() {
        //     try {
        //         // Send a POST request to deactivate user
        //         const response = await fetch('http://localhost:3000/api/deactivateuser', {
        //             method: 'POST',
        //             headers: {
        //                 'Content-Type': 'application/json',
        //                 'Authorization': `Bearer ${token}` // Include your authorization token if required
        //             },
        //             body: JSON.stringify({
        //                     roll_no: roll_no
        //                 }) // Send roll_no in the request body
        //         });

        //         if (!response.ok) {
        //             throw new Error('Failed to deactivate user');
        //         }

        //         // Display success message dynamically
        //         const data = await response.json(); // Parse JSON response
        // const successMsg = document.getElementById('msgok');
        // const message = data.message; // Extract message from response
        // document.getElementById('Msg').textContent = message; // Update message content dynamically

        //         displaycurrentmem();
        //         displaycurrentmembers();

        //         successMsg.style.display = 'flex';
        //         setTimeout(function() {
        //             successMsg.style.display = 'none';
        //         }, 3000); // Hide after 3 seconds

        //         console.log(data); // Log the response from the API

        //         // Perform additional tasks if needed (e.g., update UI, show success message)

        //         // Close the modal
        //         modal.classList.add('hidden');
        //         modal.classList.remove('flex');
        //     } catch (error) {
        //         console.error('Error deactivating user:', error);
        //         // Handle error appropriately (e.g., show error message)
        //     }
        // });
    }


    function closedeactivate() {
        // Close the modal
        var modal = document.getElementById('deactivateModal');
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        console.log(`Edit button clicked for role_no: ${roll_no}`);
    }


    async function showevent(sportName) {
        try {
            const response = await fetch('http://localhost:3000/api/displayeventsport', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({
                    sport_name: sportName
                })
            });
            if (!response.ok) {
                throw new Error('Failed to fetch events. Status: ' + response.status);
            }

            const responseData = await response.json();
            console.log('Event display:', responseData);

            const showcards = document.getElementById('showcards'); // Get the showcards container

            // Clear existing cards if needed
            showcards.innerHTML = '';

            // Check if responseData.event is an array
            if (!Array.isArray(responseData.event)) {
                throw new Error('Event data is not an array');
            }

            const currentDate = new Date();
            // Loop through events and create card elements dynamically
            responseData.event.forEach(event => {
                const eventDate = new Date(event.event_date);
                const formattedEventDate = eventDate.toISOString().split('T')[0]; // Format to YYYY-MM-DD

                // Determine if event is upcoming or completed
                const eventStatus = currentDate < eventDate ? 'Upcoming' : 'Completed';
                const eventClass = currentDate < eventDate ? 'bg-purple-600' : 'bg-red-600';

                // Create card container div
                const cardContainer = document.createElement('div');
                cardContainer.classList.add('max-w-5xl', 'mx-auto');

                cardContainer.innerHTML = `
                <div id="card-container" class="max-w-5xl mx-auto">
                    <!-- Card 1 -->
                    <div class="card px-8 py-4 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800 container-glow">
                        <div class="flex items-center justify-between">
                            <div class="date-time-container">
                                <h3 id="date">${formattedEventDate}</h3>
                                <h4><i class="bi bi-clock icon"></i> <span id="time">${event.event_time}</span></h4>
                            </div>
                            <a tabindex="0" role="button" id="occurs" class="px-3 py-1 text-sm font-bold text-gray-100 transition-colors duration-300 transform rounded cursor-pointer hover:bg-violet-500 ${eventClass}">${eventStatus}</a>
                        </div>
                        <div class="mt-2">
                            <a href="#" class="text-xl font-bold text-gray-700 dark:text-white hover:text-gray-600 dark:hover:text-gray-200 hover:underline" tabindex="0" role="link" id="event_name">${event.event_name}</a>
                            <div class="mt-2 text-gray-600 dark:text-gray-300">
                                <div class="overflow-x-auto">
                                    <table class="min-w-full table-auto">
                                        <tbody>
                                            <tr>
                                                <td class="px-4 py-2">
                                                    <div class="td-content"> <i class="bi bi-book icon"></i> <span id="category">${event.category}</span> </div>
                                                </td>
                                                <td class="px-4 py-2">
                                                    <div class="td-content"> <i class="bi bi-gender-ambiguous icon"></i> <span id="gender">${event.gender}</span> </div>
                                                </td>
                                                <td class="px-4 py-3">
                                                    <div class="td-content"> Entry fee <i class="bi bi-currency-rupee"></i> <span id="entry_fee">${event.entry_fee}</span> </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="px-4 py-2">
                                                    <div class="td-content"> <i class="bi bi-people icon"></i> <span id="is_team">${event.is_team ? 'Group' : 'Individual'}</span> </div>
                                                </td>
                                                <td class="px-4 py-2">
                                                    <div class="td-content"> <i class="bi bi-geo-alt icon"></i> ${event.place} </div>
                                                </td>
                                                <td class="px-4 py-2">
                                                    <div class="td-content"> <i class="bi bi-award icon"></i> <span id="prize">${event.no_of_prize}</span> </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between mt-4">
                            <a href="#" class="toggleReadMore text-blue-600 dark:text-blue-400 hover:underline" tabindex="0" role="link">Read more</a>
                            <div class="flex items-center">
                                <span class="chess-link font-bold text-gray-700 cursor-pointer dark:text-gray-200" tabindex="0" role="link"> ${event.sport_name} </span>
                            </div>
                        </div>
                        <div class="readMoreContent mt-4 readmore">
                            <p class="desc">${event.event_description}</p>
                            <div class="flex items-center justify-between mt-4">
                                <a href="${event.form_link}" target="_blank" class="font-bold text-violet-700 cursor-pointer dark:text-gray-200" tabindex="0" role="link">Form link</a>
                              
                            </div>
                        </div>
                    </div>
                </div>
            `;

                showcards.appendChild(cardContainer); // Append the card to the showcards container
            });

            // Now that cards are added, set up event listeners for "Read more"
            setupReadMoreListeners();

        } catch (error) {
            console.error('Error fetching events:', error.message);
        }
    }


    async function setupReadMoreListeners() {
        const toggleReadMoreLinks = document.querySelectorAll('.toggleReadMore');

        toggleReadMoreLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();
                const readMoreContent = this.closest('.card').querySelector('.readMoreContent');
                readMoreContent.classList.toggle('open');
                this.textContent = readMoreContent.classList.contains('open') ? 'Read less' : 'Read more';
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            showevent(); // Call showevent to fetch and display events


        });
    }


    window.onload = function() {
        decodeToken();

    };
</script>


<script>
    function showEditForm() {
        // Hide the element with id="displayallmembers"
        var displayallmembers = document.getElementById('displayallmembers');
        if (displayallmembers) {
            displayallmembers.style.display = 'none';
        }

        // Hide the element with id="allmember"
        var allmember = document.getElementById('allmember');
        if (allmember) {
            allmember.style.display = 'none';
        }

        // Show the form with id="editvent"
        var editForm = document.getElementById('editvent');
        if (editForm) {
            editForm.style.display = 'block';
        }
    }


    function closeForm() {
        // Show the element with id="displayallmembers"
        var displayallmembers = document.getElementById('displayallmembers');
        if (displayallmembers) {
            displayallmembers.style.display = 'block';
        }

        // Hide the form with id="editvent"
        var editForm = document.getElementById('editvent');
        if (editForm) {
            editForm.style.display = 'none';
        }
    }


    document.addEventListener('DOMContentLoaded', function() {
        flatpickr("#event_date_edit", {
            enableTime: true,
            dateFormat: "i:Y-m-d H:i",
            altInput: true,
            altFormat: "i k:F j, Y h:i K",
            monthSelectorType: "static" // This will show full month names instead of dropdown
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
        flatpickr("#last_date_edit", {
            enableTime: true,
            dateFormat: "i:Y-m-d H:i",
            altInput: true,
            altFormat: "i k:F j, Y h:i K",
            monthSelectorType: "static" // This will show full month names instead of dropdown
        });
    });
</script>





<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>