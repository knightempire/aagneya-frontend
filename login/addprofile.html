<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add profile</title>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link rel="stylesheet" href="./css/addprofile.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>

<body>
    <form id="registrationForm">
        <header>Profile details</header>
        <div class="form">
            <div class="details personal">
                <span class="title">Personal Details</span>
                <div class="fields">
                    <div class="input-field">
                        <label>Full Name</label>
                        <input type="text" name="name" placeholder="Enter your name" required>
                    </div>
                    <div class="input-field">
                        <label>Roll Number</label>
                        <input type="text" name="roll_number" placeholder="Enter your roll number" required>
                    </div>
                    <div class="input-field">
                        <label>Email</label>
                        <input type="email" name="email" placeholder="Enter your email" required>
                    </div>
                    <div class="input-field">
                        <label>Mobile Number</label>
                        <input type="tel" name="mobile" placeholder="Enter mobile number" required>
                    </div>
                    <div class="input-field">
                        <label>Gender</label>
                        <input type="text" name="gender" placeholder="Enter your Gender" required>
                    </div>
                    <div class="input-field">
                        <label>Date of Birth</label>
                        <input type="text" name="date" id="appointmentDate" class="block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Date of Birth" required />
                    </div>
                    <div class="input-field">
                        <label>Photo</label>
                        <input type="file" id="uploadPhoto" onchange="validateImage()" name="photo" accept=".jpg,.jpeg" required>
                        <div id="uploadPhotoError" class="text-red-500 text-sm mt-1" style="color: red; font-size: small;"></div>
                    </div>
                    <div class="input-field">
                        <label>Sport</label>
                        <input type="text" name="sport" placeholder="Enter your sport" required>
                    </div>
                </div>
            </div>
            <div class="buttons">
                <button type="submit">Submit</button>
            </div>
        </div>
    </form>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        // Initialize Flatpickr on the date input field
        document.addEventListener('DOMContentLoaded', function () {
            flatpickr("#appointmentDate", {
                dateFormat: "Y-m-d",
                altInput: true,
                altFormat: "F j, Y"
            });
        });

        function validateImage() {
            const fileInput = document.getElementById('uploadPhoto');
            const file = fileInput.files[0];
            const img = new Image();
            const errorContainer = document.getElementById('uploadPhotoError');

            img.onload = function () {
                const width = img.width;
                const height = img.height;

                // Check if aspect ratio is 2:1
                if (width !== height) {
    errorContainer.textContent = 'Image dimensions must be in a 1:1 ratio.';
    fileInput.value = ''; // Clear the input
} else {
    errorContainer.textContent = ''; // Clear error message if valid
}

            };

            img.onerror = function () {
                errorContainer.textContent = 'Invalid image file.';
                fileInput.value = ''; // Clear the input
            };

            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        const form = document.getElementById('registrationForm');

        form.addEventListener('submit', function (event) {
            event.preventDefault();

            // Get all form data
            const formData = new FormData(form);

            // Create an object to store the data
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });

            console.log('Form data', data);
            // Here you can handle the submission of form data, e.g., send it to a server via AJAX
        });
    </script>
</body>

</html>
