<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <title>Aagneya</title>
</head>

<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <a href="#" class="logo">
            <i class='bx bx-code-alt'></i>
            <div class="logo-name"><span>Aag</span>neya</div>
        </a>
        <ul class="side-menu">
            <li><a href="./dashboard.html"><i class='bx bxs-dashboard'></i>Dashboard</a></li>
            <li><a href="./event.html"><i class='bx bx-calendar-event'></i>Events</a></li>
            <li class="active"><a href="./achivement.html"><i class='bx bx-medal'></i>Achievement</a></li>
            <li><a href="#"><i class='bx bx-news'></i>Blog</a></li>
            <li><a href="./user.html"><i class='bx bx-group'></i>Users</a></li>
            <li><a href="#" class="toggle-submenu" data-target="community"><i class='bx bx-category-alt'></i>Community
                    <i class='bx bx-chevron-down'></i> </a> </li>
            <ul class="submenu" id="community-submenu">
                <li><a href="./community/voting.html"><i class='bx bxl-graphql'></i>Stats</a></li>
                <li><a href="./community/president.html"><i class='bx bx-crown'></i>President</a></li>
                <li><a href="./community/vicepresident.html"><i class='bx bx-star'></i>Vice President</a></li>
                <li><a href="./community/secretary.html"><i class='bx bx-user-notepad'></i>Secretary</a></li>
                <li><a href="./community/pulicrelation.html"><i class='bx bx-broadcast'></i>Public Relation</a></li>
            </ul>
            <li><a href="./editProfile.html"><i class='bx bx-cog'></i>Settings</a></li>
        </ul>

        <ul class="side-menu">
            <li>
                <a href="#" class="logout" onclick="logout()"><i class='bx bx-log-out-circle'></i> Logout </a>
            </li>
        </ul>
    </div>
    <!-- End of Sidebar -->

    <!-- Main Content -->
    <div class="content">
        <!-- Navbar -->
        <nav>
            <i class='bx bx-menu'></i>
            <form action="#">
                <div class="form-input">
                    <!-- <input type="search" placeholder="Search..."> -->
                    <button style="background-color: transparent; color: #1976d2; width: fit-content;">Hi , <span
                            id="name"> Name</span></button>
                </div>
            </form>
            <input type="checkbox" id="theme-toggle" hidden>
            <!-- <label for="theme-toggle" class="theme-toggle"></label> -->
            <a href="#" class="notif">
                <i class='bx bx-bell'></i>
                <span class="count">12</span>
            </a>
            <!-- <a href="#" class="profile">
                <img src="images/logo.png">
            </a> -->
        </nav>

        <!-- End of Navbar -->

        <main>
            <div class="header">
                <div class="left">
                    <h1>Dashboard</h1>
                    <ul class="breadcrumb">
                        <li><a href="#">
                                Analytics
                            </a></li>
                        /
                        <li><a href="#" class="active">Shop</a></li>
                    </ul>
                </div>
                <a href="#" class="report">
                    <i class='bx bxs-add-to-queue'></i>
                    <span id="changes">Add</span>
                    <i class='bx bxs-x-circle' style="display: none;"></i>
                </a>
            </div>
            <br>
            <!-- code from here  add achivement code -->
            <div>
                <div class="mx-4 md:mx-14 mt-10 border-2 border-black bg-white bg-opacity-90 rounded-lg relative" id="formcontent">
                    <div class="mt-6 md:mt-10 text-center font-bold text-lg md:text-xl">Add Achievement Details</div>
                    <div class="p-4 md:p-8">
                        <div class="flex flex-col md:flex-row gap-4">
                            <div class="w-full md:w-1/2">
                                <input type="text" name="event_name" id="event_name_edit" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                    placeholder="Achievement Name" required />
                                <div id="event_name_error" class="text-red-500 text-sm mt-1"></div>
                            </div>
                            <div class="w-full md:w-1/2">
                                <input type="text" name="date" id="achivement_date" class="block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                    placeholder="Date of Birth" required />
                                <div id="achivement_date_error" class="text-red-500 text-sm mt-1"></div>
                            </div>
                        </div>
                        <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">



                            <div class="w-full md:w-1/2">
                                <label for="sports" class="block font-semibold text-gray-700">Select Sports</label>
                                <select name="sports" id="sports" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" required>
                                    <option value="" disabled selected>Please Select Sports</option>
                                </select>
                                <div id="sports_error" class="text-red-500 text-sm mt-1"></div>
                            </div>


                            <div class="w-full md:w-1/2">
                                <label for="participation" class="block font-semibold text-gray-700">Select
                                    Participation
                                    Type</label>
                                <select id="participation" name="participation" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                    onchange="showFields1()" required>
                                    <option value="">Select Participation Type</option>
                                    <option value="0">Individual</option>
                                    <option value="1">Team</option>
                                </select>
                                <div id="participation_error" class="text-red-500 text-sm mt-1"></div>
                            </div>
                        </div>
                        <div id="dynamicFields"></div>
                        <div class="mb-4 md:mb-10">
                            <textarea name="event_description" id="event_description_edit" cols="30" rows="5" class="resize-none mt-4 w-full rounded-md border border-gray-300 p-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                placeholder="Achievement Description" required></textarea>
                            <div id="event_description_error" class="text-red-500 text-sm mt-1"></div>
                        </div>
                        <div class="text-center">
                            <button onclick="sendAchievementData()" class="cursor-pointer rounded-lg bg-purple-700 px-6 py-2 sm:py-3 text-sm font-semibold text-white mr-4">Add
                                Achievement</button>
                        </div>
                    </div>
                </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
            <!-- //validate for and others -->
            <script>
                function showFields1() {

                    const dynamicFields = document.getElementById('dynamicFields');
                    dynamicFields.innerHTML = ''; // Clear previous fields
                    const participationType = document.getElementById('participation').value;

                    if (participationType === '1') {
                        // Team selected
                        dynamicFields.innerHTML = `
            <div class="my-4 md:my-6">
                <label for="teamSize" class="block font-semibold text-gray-700">Number of Persons in Team</label>
                <input type="number" id="teamSize" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" oninput="generateTeamFields1()" required>
                <div id="teamSize_error" class="text-red-500 text-sm mt-1"></div>
            </div>
            <div id="teamMembers"></div>
        `;
                    } else if (participationType === '0') {
                        // Individual selected
                        dynamicFields.innerHTML = `
            <div class="flex flex-col md:flex-row gap-4">
                <div class="w-full md:w-1/2">
                                    <label for="individual" class="block font-semibold text-gray-700"> Name</label>

                    <input type="text" name="indiv_name" id="indiv_name" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Your name" required />
                    <div id="indiv_name_error" class="text-red-500 text-sm mt-1"></div>
                </div>
                <div class="w-full md:w-1/2">
                                    <label for="individualrollnumber" class="block font-semibold text-gray-700"> Roll number</label>

                    <input type="text" name="roll_num" id="indiv_roll_numb" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Your roll number" required />
                    <div id="indiv_roll_numb_error" class="text-red-500 text-sm mt-1"></div>
                </div>
            </div>
  <div class="my-4 md:my-10 flex flex-col md:flex-row gap-4">
    <div class="w-full md:w-1/2">
        <label for="uploadPhoto" class="block font-semibold text-gray-700">Upload Photo</label>
        <input type="file" id="uploadPhoto" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" onchange="validateImage()" required>
        <div id="uploadPhotoError" class="text-red-500 text-sm mt-1"></div>
    </div>
    <div class="w-full md:w-1/2">
        <label for="uploadcertificate" class="block font-semibold text-gray-700">Upload Certificate</label>
        <input type="file" id="uploadcertificate" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" onchange="validatepdf()" required>
        <div id="uploadcertificateError" class="text-red-500 text-sm mt-1"></div>
    </div>
</div>

    
</div>

        `;
                    }
                }

                function generateTeamFields1() {
                    const teamSize = document.getElementById('teamSize').value;
                    const teamMembers = document.getElementById('teamMembers');
                    teamMembers.innerHTML = ''; // Clear previous fields

                    teamMembers.innerHTML += `
        <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
            <div class="w-full md:w-1/2">
                <label for="captainName" class="block font-semibold text-gray-700">Captain Name</label>
                <input type="text" id="captainName" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Captain Name" required>
                <div id="captainName_error" class="text-red-500 text-sm mt-1"></div>
            </div>
            <div class="w-full md:w-1/2">
                <label for="captainRollNumber" class="block font-semibold text-gray-700">Captain Roll Number</label>
                <input type="text" id="captainRollNumber" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Captain Roll Number" required>
                <div id="captainRollNumber_error" class="text-red-500 text-sm mt-1"></div>
            </div>
        </div>
    `;

                    for (let i = 2; i <= teamSize; i += 2) {
                        const nextIndex = i + 1;
                        teamMembers.innerHTML += `
            <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                <div class="w-full md:w-1/2">
                                    <label for="captainRollNumber" class="block font-semibold text-gray-700">Participant ${i} Roll Number</label>

                    <input type="text" name="roll_num${i}" id="indiv_roll_numb${i}" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Participant ${i} roll number" required />
                    <div id="indiv_roll_numb${i}_error" class="text-red-500 text-sm mt-1"></div>
                </div>
                ${nextIndex <= teamSize ? `
                <div class="w-full md:w-1/2">
                                    <label for="captainRollNumber" class="block font-semibold text-gray-700">Participant ${nextIndex} Roll Number</label>

                    <input type="text" name="roll_num${nextIndex}" id="indiv_roll_numb${nextIndex}" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Participant ${nextIndex} roll number" required />
                    <div id="indiv_roll_numb${nextIndex}_error" class="text-red-500 text-sm mt-1"></div>
                </div>
                ` : ''}
            </div>
        `;
                    }

                    // Add the file upload field for team photo
                    teamMembers.innerHTML += `
       <div class="my-4 md:my-10 flex flex-col md:flex-row gap-4">
    <div class="w-full md:w-1/2">
        <label for="uploadPhoto" class="block font-semibold text-gray-700">Upload Photo</label>
        <input type="file" id="uploadPhoto" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" onchange="validateImage()" required>
        <div id="uploadPhotoError" class="text-red-500 text-sm mt-1"></div>
    </div>
    <div class="w-full md:w-1/2">
        <label for="uploadcertificate" class="block font-semibold text-gray-700">Upload Certificate</label>
        <input type="file" id="uploadcertificate" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" onchange="validatepdf()" required>
        <div id="uploadcertificateError" class="text-red-500 text-sm mt-1"></div>
    </div>
</div>

    `;
                }


                function validatepdf() {
                    const fileInput = document.getElementById('uploadcertificate');
                    const pdfErrorDiv = document.getElementById('uploadcertificateError');
                    const pdfFilePath = fileInput.value;
                    const allowedExtensions = /(\.pdf)$/i;

                    if (!allowedExtensions.exec(pdfFilePath)) {
                        pdfErrorDiv.innerText = 'Invalid file type. Only PDF files are allowed.';
                        fileInput.value = '';
                        return false;
                    } else {
                        pdfErrorDiv.innerText = '';
                    }

                    if (!fileInput.files[0]) {
                        pdfErrorDiv.textContent = 'Please upload a PDF.';
                        return false;
                    }

                    return true;
                }

                function validateImage() {
                    const fileInput = document.getElementById('uploadPhoto');
                    const imageErrorDiv = document.getElementById('uploadPhotoError');
                    const file = fileInput.files[0];
                    const img = new Image();
                    const allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;

                    // Clear any previous error messages
                    imageErrorDiv.textContent = '';

                    if (!file) {
                        imageErrorDiv.textContent = 'Please upload a photo.';
                        return false;
                    }

                    const imageFilePath = fileInput.value;

                    // Check file extension
                    if (!allowedExtensions.exec(imageFilePath)) {
                        imageErrorDiv.textContent = 'Please upload a file with .jpeg/.jpg/.png extension only.';
                        fileInput.value = ''; // Clear the input
                        return false;
                    }

                    const reader = new FileReader();

                    reader.onload = function (e) {
                        img.src = e.target.result;
                        img.onload = function () {
                            const width = img.width;
                            const height = img.height;

                            if (width / height !== 2 && height / width !== 2) {
                                imageErrorDiv.textContent = 'Image dimensions must be in a 2:1 ratio.';
                                fileInput.value = ''; // Clear the input
                                return false;
                            }
                            imageErrorDiv.textContent = ''; // Clear any existing error message
                            return true;
                        };
                    };

                    reader.readAsDataURL(file);
                    return true;
                }




                function validateForm() {
                    // Clear all previous error messages
                    document.querySelectorAll('.text-red-500').forEach(el => el.textContent = '');

                    let isValid = true;

                    const achivement_name = document.getElementById('event_name_edit').value;
                    if (!achivement_name) {
                        document.getElementById('event_name_error').textContent = 'Please enter the achievement name.';
                        isValid = false;
                    }

                    const achivement_date = document.getElementById('achivement_date').value;
                    if (!achivement_date) {
                        document.getElementById('achivement_date_error').textContent = 'Please enter the achievement date.';
                        isValid = false;
                    }

                    const sports = document.getElementById('sports').value;
                    if (!sports) {
                        document.getElementById('sports_error').textContent = 'Please select a sport.';
                        isValid = false;
                    }

                    const participation = document.getElementById('participation').value;
                    if (!participation) {
                        document.getElementById('participation_error').textContent = 'Please select a participation type.';
                        isValid = false;
                    }

                    const eventDescription = document.getElementById('event_description_edit').value;
                    if (!eventDescription) {
                        document.getElementById('event_description_error').textContent = 'Please enter the achievement description.';
                        isValid = false;
                    }

                    if (participation == 0) {
                        const indivRollNumb = document.getElementById('indiv_roll_numb').value;
                        if (!indivRollNumb) {
                            document.getElementById('indiv_roll_numb_error').textContent = 'Please enter your roll number.';
                            isValid = false;
                        }

                        if (!validateImage()) {
                            isValid = false;
                        }

                        if (!validatepdf()) {
                            isValid = false;
                        }
                    } else if (participation == 1) {
                        const teamSize = document.getElementById('teamSize').value;
                        if (!teamSize || teamSize <= 0) {
                            document.getElementById('teamSize_error').textContent = 'Please enter a valid number of persons in the team.';
                            isValid = false;
                        }

                        const captainName = document.getElementById('captainName').value;
                        if (!captainName) {
                            document.getElementById('captainName_error').textContent = 'Please enter the captain\'s name.';
                            isValid = false;
                        }

                        const captainRollNumber = document.getElementById('captainRollNumber').value;
                        if (!captainRollNumber) {
                            document.getElementById('captainRollNumber_error').textContent = 'Please enter the captain\'s roll number.';
                            isValid = false;
                        }

                        for (let i = 2; i <= teamSize; i++) {
                            const rollNumber = document.getElementById(`indiv_roll_numb${i}`).value;
                            if (!rollNumber) {
                                document.getElementById(`indiv_roll_numb${i}_error`).textContent = `Please enter member ${i}'s roll number.`;
                                isValid = false;
                            }
                        }

                        if (!validateImage()) {
                            isValid = false;
                        }
                        if (!validatepdf()) {
                            isValid = false;
                        }
                    }

                    return isValid;
                }




                function addEvent() {
                    if (validateForm()) {
                        const achivement_name = document.getElementById('event_name_edit').value;
                        const achivement_date = document.getElementById('achivement_date').value;
                        const sports = document.getElementById('sports').value;
                        const participation = document.getElementById('participation').value;
                        const eventDescription = document.getElementById('event_description_edit').value;
                        let participationData = '';

                        if (participation == 0) {
                            const indivName = document.getElementById('indiv_name').value;
                            const indivRollNumb = document.getElementById('indiv_roll_numb').value;
                            console.log(`Individual Name: ${indivName}`);
                            participationData += `${indivRollNumb}`;
                            const fileInput = document.getElementById('uploadPhoto');
                            const fileName = fileInput.files[0] ? fileInput.files[0].name : 'No file selected';
                            console.log(`Uploaded photo : ${fileName}`);
                            const pdfInput = document.getElementById('uploadcertificate');
                            const pdfName = pdfInput.files[0] ? pdfInput.files[0].name : 'No file selected';
                            console.log(`Uploaded PDF : ${pdfName}`);

                        } else if (participation == 1) { // Team
                            const teamSize = document.getElementById('teamSize').value;
                            const captainName = document.getElementById('captainName').value;
                            const captainRollNumber = document.getElementById('captainRollNumber').value;
                            participationData += `${captainRollNumber}`;
                            const captain = `${captainName}`;
                            console.log(`Captain Name: ${captainName}`);
                            for (let i = 2; i <= teamSize; i++) {
                                const rollNumber = document.getElementById(`indiv_roll_numb${i}`).value;
                                // console.log(`Member ${i - 1} Roll Number: ${rollNumber}`);
                                participationData += ` , ${rollNumber}`;
                            }
                            const fileInput = document.getElementById('uploadPhoto');
                            const fileName = fileInput.files[0] ? fileInput.files[0].name : 'No file selected';
                            console.log(`Uploaded photo : ${fileName}`);

                            const pdfInput = document.getElementById('uploadcertificate');
                            const pdfName = pdfInput.files[0] ? pdfInput.files[0].name : 'No file selected';
                            console.log(`Uploaded PDF : ${pdfName}`);
                        }

                        console.log(`Achievement Name: ${achivement_name}`);
                        console.log(`Achievement Date: ${achivement_date}`);
                        console.log(`Sports: ${sports}`);
                        console.log(`Participation roll number: ${participationData}`);
                        console.log(`Achievement Description: ${eventDescription}`);


                    }
                }
                async function sendAchievementData() {
                    addEvent();

                    if (validateForm()) {
                        const achievement_name = document.getElementById('event_name_edit').value;
                        const achievement_date = document.getElementById('achivement_date').value;
                        const sport_id = document.getElementById('sports').value;
                        const is_team = document.getElementById('participation').value;
                        const description = document.getElementById('event_description_edit').value;

                        let name = '';
                        let roll_numbers = [];

                        if (is_team === '0') { // Individual
                            name = document.getElementById('indiv_name').value;
                            roll_numbers.push(document.getElementById('indiv_roll_numb').value);
                        } else { // Team
                            const teamSize = parseInt(document.getElementById('teamSize').value);
                            name = document.getElementById('captainName').value;
                            roll_numbers.push(document.getElementById('captainRollNumber').value);

                            for (let i = 2; i <= teamSize; i++) {
                                roll_numbers.push(document.getElementById(`indiv_roll_numb${i}`).value);
                            }
                        }

                        const formData = new FormData();
                        formData.append('achievement_name', achievement_name);
                        formData.append('achievement_date', achievement_date);
                        formData.append('description', description);
                        formData.append('name', name);
                        formData.append('roll_no', JSON.stringify(roll_numbers));
                        formData.append('is_team', is_team);
                        formData.append('sport_id', sport_id);

                        // Append files
                        const photoFile = document.getElementById('uploadPhoto').files[0];
                        const certificateFile = document.getElementById('uploadcertificate').files[0];

                        if (photoFile) formData.append('image', photoFile);
                        if (certificateFile) formData.append('pdf', certificateFile);

                        try {
                            const response = await fetch('https://aagneya-backend.onrender.com/api/adminaddachievement', {
                                method: 'POST', // Ensure this is POST
                                body: formData
                            });

                            if (!response.ok) {
                                throw new Error(`HTTP error! status: ${response.status}`);
                            }

                            const data = await response.json();

                            if (data.success) {
                                alert('Achievement added successfully!');
                                // Optionally, reset the form or redirect
                            } else {
                                alert('Error adding achievement: ' + (data.error || 'Unknown error'));
                            }
                        } catch (error) {
                            console.error('Error:', error);
                            alert('An error occurred while adding the achievement: ' + error.message);
                        }
                    }
                }




                document.addEventListener('DOMContentLoaded', function () {
                    flatpickr("#achivement_date", {
                        dateFormat: "Y-m-d",
                        altInput: true,
                        altFormat: "F j, Y"
                    });
                });
            </script>

            <br>
            <div class="relative min-h-screen bg-gray-100 dark:bg-gray-900" id="seprate">
                <section class="container px-4 mx-auto">
                    <div class="sm:flex sm:items-center sm:justify-between">
                    </div>

                    <!-- Buttons for toggling sections -->
                    <div class="mt-6 md:flex md:items-center md:justify-between">
                        <div class="inline-flex overflow-hidden bg-white border divide-x rounded-lg dark:bg-gray-900 rtl:flex-row-reverse dark:border-gray-700 dark:divide-gray-700">
                            <button id="viewAllSectionBtn" class="toggle-btn px-5 py-2 text-xs font-medium text-gray-600 transition-colors duration-200 sm:text-sm dark:hover:bg-gray-800 dark:text-gray-300 hover:bg-gray-100">
                                View all
                            </button>
                            <button id="monitoredSectionBtn" class="toggle-btn px-5 py-2 text-xs font-medium text-gray-600 transition-colors duration-200 sm:text-sm dark:hover:bg-gray-800 dark:text-gray-300 hover:bg-gray-100">
                               History
                            </button>
                            <button id="unmonitoredSectionBtn" class="toggle-btn px-5 py-2 text-xs font-medium text-gray-600 transition-colors duration-200 sm:text-sm dark:hover:bg-gray-800 dark:text-gray-300 hover:bg-gray-100" style="display: none;">
                               Pending 
                            </button>
                        </div>


                    </div>

                    <!-- Sections to toggle visibility -->
                    <div id="viewAllSection" class="flex flex-col mt-6">


                        <!-- component -->
                        <!-- display achivemnts -->

                        <div id="achievements-container" class="flex flex-col items-center">
                            <div class="flex flex-col space-y-4 items-center">
                                <div class="bg-white rounded shadow-lg sm:w-3/4 md:w-1/2 lg:w-3/5" style="margin: 20px;">
                                    <div class="w-full h-100 rounded-t overflow-hidden">
                                        <img src="https://images.ctfassets.net/hrltx12pl8hq/28ECAQiPJZ78hxatLTa7Ts/2f695d869736ae3b0de3e56ceaca3958/free-nature-images.jpg?fit=fill&w=1200&h=630" alt="CFP Trophy" class="w-full h-full object-cover">
                                    </div>
                                    <div class="flex flex-col md:flex-row">
                                        <div class="flex flex-row justify-around p-4 font-bold leading-none text-gray-800 uppercase bg-gray-400 rounded md:flex-col md:items-center md:justify-center md:w-1/4 event-date">
                                            <div class="md:text-3xl">Jan</div>
                                            <div class="md:text-6xl">13</div>
                                            <div class="md:text-xl">7 pm</div>
                                        </div>
                                        <div class="p-4 font-normal text-gray-800 md:w-3/4">
                                            <h1 class="mb-4 text-2xl font-bold leading-none tracking-tight text-gray-800 event-title">
                                                2020 National Championship</h1>
                                            <p class="text-sm leading-tight event-description">The College Football Playoff (CFP) determines the national champion of the top division of college football. The format fits within the academic calendar and preserves the sport’s unique and compelling regular
                                                season.
                                            </p>
                                            <div class="flex flex-row items-center mt-4 text-gray-700 event-details">
                                                <div class="w-1/2 flex items-center loc">
                                                    <i class="fa fa-map-marker-alt mr-2"></i> Coimbatore
                                                </div>
                                                <div class="w-1/2 flex justify-end items-center spor">
                                                    <i class="fa fa-football-ball mr-2"></i> Football
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>




                    </div>


                    <div id="monitoredSection" class="flex flex-col mt-6 hidden">


                        <div class="displayallmembers" id="displayallmembers">
                            <table class="min-w-full divide-y divide-gray-200 overflow-x-auto">
                                <thead class="bg-blue-100">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Achievement Name
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Sports
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Team Head
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Date
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Category
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Actions
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200" id="displayusers">
                                    <!-- Achievement rows will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>


                        <!-- edit achi//removed the code for the form -->
                        <div>
                            <div id="allmember" style="display: none;">
                                <button class="absolute top-2 right-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full flex items-center" onclick="closeFormallmember()">
                                    <span class="mr-1">Close</span>
                                    <i class='bx bxs-x-circle'></i>
                                </button>
                                <div>
                                    <div class="mx-4 md:mx-14 mt-10 border-2 border-black bg-white bg-opacity-90 rounded-lg relative" id="formcontent_another">
                                        <div class="mt-6 md:mt-10 text-center font-bold text-lg md:text-xl">Edit Achievement Details</div>
                                        <div class="p-4 md:p-8">
                                            <div class="flex flex-col md:flex-row gap-4">
                                                <input type="hidden" id="achievement_id_edit" />
                                                <div class="w-full md:w-1/2">
                                                    <input type="text" name="another_event_name" id="another_event_name_edit" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                                        placeholder="Another Achievement Name" required />
                                                    <div id="another_event_name_error" class="text-red-500 text-sm mt-1"></div>
                                                </div>
                                                <div class="w-full md:w-1/2">
                                                    <input type="text" name="another_date" id="another_achievement_date" class="block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                                        placeholder="Date of Birth" required />
                                                    <div id="another_achievement_date_error" class="text-red-500 text-sm mt-1"></div>
                                                </div>
                                            </div>
                                            <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">

                                                <div class="w-full md:w-1/2">
                                                    <label for="another_sports" class="block font-semibold text-gray-700">Select Sports</label>
                                                    <select name="another_sports" id="another_sports" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                                        required>
                                                        <option value="" disabled selected>Please Select Sports</option>
                                                    </select>
                                                    <div id="another_sports_error" class="text-red-500 text-sm mt-1">
                                                    </div>
                                                </div>

                                                <div class="w-full md:w-1/2">
                                                    <label for="another_participation" class="block font-semibold text-gray-700">Select
                                                        Participation Type</label>
                                                    <select id="another_participation" name="another_participation" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                                        onchange="anotherShowFields1()" required>
                                                        <option value="">Select Participation Type</option>
                                                        <option value="0">Individual</option>
                                                        <option value="1">Team</option>
                                                    </select>
                                                    <div id="another_participation_error" class="text-red-500 text-sm mt-1"></div>
                                                </div>
                                            </div>
                                            <div id="another_dynamicFields"></div>
                                            <div class="mb-4 md:mb-10">
                                                <textarea name="another_event_description" id="another_event_description_edit" cols="30" rows="5" class="resize-none mt-4 w-full rounded-md border border-gray-300 p-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                                    placeholder="Another Achievement Description" required></textarea>
                                                <div id="another_event_description_error" class="text-red-500 text-sm mt-1"></div>
                                            </div>
                                            <div class="text-center">
                                                <button onclick="sendAnotherAchievementData()" class="cursor-pointer rounded-lg bg-purple-700 px-6 py-2 sm:py-3 text-sm font-semibold text-white mr-4">Add
                                                    Another Achievement</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
                            <script>
                                function anotherShowFields1() {

                                    const dynamicFields = document.getElementById('another_dynamicFields');
                                    dynamicFields.innerHTML = ''; // Clear previous fields
                                    const participationType = document.getElementById('another_participation').value;

                                    if (participationType === '1') {
                                        // Team selected
                                        dynamicFields.innerHTML = `
                <div class="my-4 md:my-6">
                    <label for="another_teamSize" class="block font-semibold text-gray-700">Number of Persons in Team</label>
                    <input type="number" id="another_teamSize" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" oninput="generateAnotherTeamFields1()" required>
                    <div id="another_teamSize_error" class="text-red-500 text-sm mt-1"></div>
                </div>
                <div id="another_teamMembers"></div>
            `;
                                    } else if (participationType === '0') {
                                        // Individual selected
                                        dynamicFields.innerHTML = `
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="w-full md:w-1/2">
                        <label for="another_individual" class="block font-semibold text-gray-700"> Name</label>
                        <input type="text" name="another_indiv_name" id="another_indiv_name" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Your name" required />
                        <div id="another_indiv_name_error" class="text-red-500 text-sm mt-1"></div>
                    </div>
                    <div class="w-full md:w-1/2">
                        <label for="another_individualrollnumber" class="block font-semibold text-gray-700"> Roll number</label>
                        <input type="text" name="another_roll_num" id="another_indiv_roll_numb" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Your roll number" required />
                        <div id="another_indiv_roll_numb_error" class="text-red-500 text-sm mt-1"></div>
                    </div>
                </div>
                <div class="my-4 md:my-10 flex flex-col md:flex-row gap-4">
                    <div class="w-full md:w-1/2">
                        <label for="another_uploadPhoto" class="block font-semibold text-gray-700">Upload Photo</label>
                        <input type="file" id="another_uploadPhoto" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" onchange="validateAnotherImage()" required>
                        <div id="another_uploadPhotoError" class="text-red-500 text-sm mt-1"></div>
                    </div>
                    <div class="w-full md:w-1/2">
                        <label for="another_uploadcertificate" class="block font-semibold text-gray-700">Upload Certificate</label>
                        <input type="file" id="another_uploadcertificate" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" onchange="validateAnotherpdf()" required>
                        <div id="another_uploadcertificateError" class="text-red-500 text-sm mt-1"></div>
                    </div>
                </div>
            `;
                                    }
                                }

                                function generateAnotherTeamFields1() {
                                    const teamSize = document.getElementById('another_teamSize').value;
                                    const teamMembers = document.getElementById('another_teamMembers');
                                    teamMembers.innerHTML = ''; // Clear previous fields

                                    teamMembers.innerHTML += `
            <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                <div class="w-full md:w-1/2">
                    <label for="another_captainName" class="block font-semibold text-gray-700">Captain Name</label>
                    <input type="text" id="another_captainName" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Captain Name" required>
                    <div id="another_captainName_error" class="text-red-500 text-sm mt-1"></div>
                </div>
                <div class="w-full md:w-1/2">
                    <label for="another_captainRollNumber" class="block font-semibold text-gray-700">Captain Roll Number</label>
                    <input type="text" id="another_captainRollNumber" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Captain Roll Number" required>
                    <div id="another_captainRollNumber_error" class="text-red-500 text-sm mt-1"></div>
                </div>
            </div>
        `;

                                    for (let i = 2; i <= teamSize; i += 2) {
                                        const nextIndex = i + 1;
                                        teamMembers.innerHTML += `
                <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                    <div class="w-full md:w-1/2">
                        <label for="another_captainRollNumber" class="block font-semibold text-gray-700">Participant ${i} Roll Number</label>
                        <input type="text" name="another_roll_num${i}" id="another_indiv_roll_numb${i}" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Participant ${i} roll number" required />
                        <div id="another_indiv_roll_numb${i}_error" class="text-red-500 text-sm mt-1"></div>
                    </div>
                    ${nextIndex <= teamSize ? `
                    <div class="w-full md:w-1/2">
                        <label for="another_captainRollNumber" class="block font-semibold text-gray-700">Participant ${nextIndex} Roll Number</label>
                        <input type="text" name="another_roll_num${nextIndex}" id="another_indiv_roll_numb${nextIndex}" class="mt-4 md:mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" placeholder="Participant ${nextIndex} roll number" required />
                        <div id="another_indiv_roll_numb${nextIndex}_error" class="text-red-500 text-sm mt-1"></div>
                    </div>
                    ` : ''}
                </div>
            `;
                                    }

                                    // Add the file upload field for team photo
                                    teamMembers.innerHTML += `
            <div class="my-4 md:my-10 flex flex-col md:flex-row gap-4">
                <div class="w-full md:w-1/2">
                    <label for="another_uploadPhoto" class="block font-semibold text-gray-700">Upload Photo</label>
                    <input type="file" id="another_uploadPhoto" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" onchange="validateAnotherImage()" required>
                    <div id="another_uploadPhotoError" class="text-red-500 text-sm mt-1"></div>
                </div>
                <div class="w-full md:w-1/2">
                    <label for="another_uploadcertificate" class="block font-semibold text-gray-700">Upload Certificate</label>
                    <input type="file" id="another_uploadcertificate" class="mt-2 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 placeholder-gray-400 shadow-sm text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm" onchange="validateAnotherpdf()" required>
                    <div id="another_uploadcertificateError" class="text-red-500 text-sm mt-1"></div>
                </div>
            </div>
        `;
                                }

                                function validateAnotherpdf() {
                                    const fileInput = document.getElementById('another_uploadcertificate');
                                    const pdfErrorDiv = document.getElementById('another_uploadcertificateError');
                                    const pdfFilePath = fileInput.value;
                                    const allowedExtensions = /(\.pdf)$/i;

                                    if (!allowedExtensions.exec(pdfFilePath)) {
                                        pdfErrorDiv.innerText = 'Invalid file type. Only PDF files are allowed.';
                                        fileInput.value = '';
                                        return false;
                                    } else {
                                        pdfErrorDiv.innerText = '';
                                    }

                                    if (!fileInput.files[0]) {
                                        pdfErrorDiv.textContent = 'Please upload a PDF.';
                                        return false;
                                    }

                                    return true;
                                }

                                function validateAnotherImage() {
                                    const fileInput = document.getElementById('another_uploadPhoto');
                                    const imageErrorDiv = document.getElementById('another_uploadPhotoError');
                                    const file = fileInput.files[0];
                                    const img = new Image();
                                    const allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;

                                    // Clear any previous error messages
                                    imageErrorDiv.textContent = '';

                                    if (!file) {
                                        imageErrorDiv.textContent = 'Please upload a photo.';
                                        return false;
                                    }

                                    const imageFilePath = fileInput.value;

                                    // Check file extension
                                    if (!allowedExtensions.exec(imageFilePath)) {
                                        imageErrorDiv.textContent = 'Please upload a file with .jpeg/.jpg/.png extension only.';
                                        fileInput.value = ''; // Clear the input
                                        return false;
                                    }

                                    const reader = new FileReader();

                                    reader.onload = function (e) {
                                        img.src = e.target.result;
                                        img.onload = function () {
                                            const width = img.width;
                                            const height = img.height;

                                            if (width / height !== 2 && height / width !== 2) {
                                                imageErrorDiv.textContent = 'Image dimensions must be in a 2:1 ratio.';
                                                fileInput.value = ''; // Clear the input
                                                return false;
                                            }
                                            imageErrorDiv.textContent = ''; // Clear any existing error message
                                            return true;
                                        };
                                    };

                                    reader.readAsDataURL(file);
                                    return true;
                                }

                                function validateAnotherForm() {
                                    // Clear all previous error messages
                                    document.querySelectorAll('.text-red-500').forEach(el => el.textContent = '');

                                    let isValid = true;

                                    const achievement_name = document.getElementById('another_event_name_edit').value;
                                    if (!achievement_name) {
                                        document.getElementById('another_event_name_error').textContent = 'Please enter the achievement name.';
                                        isValid = false;
                                    }

                                    const achievement_date = document.getElementById('another_achievement_date').value;
                                    if (!achievement_date) {
                                        document.getElementById('another_achievement_date_error').textContent = 'Please enter the achievement date.';
                                        isValid = false;
                                    }

                                    const sports = document.getElementById('another_sports').value;
                                    if (!sports) {
                                        document.getElementById('another_sports_error').textContent = 'Please select a sport.';
                                        isValid = false;
                                    }

                                    const participation = document.getElementById('another_participation').value;
                                    if (!participation) {
                                        document.getElementById('another_participation_error').textContent = 'Please select a participation type.';
                                        isValid = false;
                                    }

                                    const eventDescription = document.getElementById('another_event_description_edit').value;
                                    if (!eventDescription) {
                                        document.getElementById('another_event_description_error').textContent = 'Please enter the achievement description.';
                                        isValid = false;
                                    }

                                    if (participation == 0) {
                                        const indivRollNumb = document.getElementById('another_indiv_roll_numb').value;
                                        if (!indivRollNumb) {
                                            document.getElementById('another_indiv_roll_numb_error').textContent = 'Please enter your roll number.';
                                            isValid = false;
                                        }

                                        if (!validateAnotherImage()) {
                                            isValid = false;
                                        }

                                        if (!validateAnotherpdf()) {
                                            isValid = false;
                                        }
                                    } else if (participation == 1) {
                                        const teamSize = document.getElementById('another_teamSize').value;
                                        if (!teamSize || teamSize <= 0) {
                                            document.getElementById('another_teamSize_error').textContent = 'Please enter a valid number of persons in the team.';
                                            isValid = false;
                                        }

                                        const captainName = document.getElementById('another_captainName').value;
                                        if (!captainName) {
                                            document.getElementById('another_captainName_error').textContent = 'Please enter the captain\'s name.';
                                            isValid = false;
                                        }

                                        const captainRollNumber = document.getElementById('another_captainRollNumber').value;
                                        if (!captainRollNumber) {
                                            document.getElementById('another_captainRollNumber_error').textContent = 'Please enter the captain\'s roll number.';
                                            isValid = false;
                                        }

                                        for (let i = 2; i <= teamSize; i++) {
                                            const rollNumber = document.getElementById(`another_indiv_roll_numb${i}`).value;
                                            if (!rollNumber) {
                                                document.getElementById(`another_indiv_roll_numb${i}_error`).textContent = `Please enter member ${i}'s roll number.`;
                                                isValid = false;
                                            }
                                        }

                                        if (!validateAnotherImage()) {
                                            isValid = false;
                                        }
                                        if (!validateAnotherpdf()) {
                                            isValid = false;
                                        }
                                    }

                                    return isValid;
                                }

                                function addAnotherEvent() {
                                    if (validateAnotherForm()) {
                                        const id = document.getElementById('achievement_id_edit').value;
                                        const achievement_name = document.getElementById('another_event_name_edit').value;
                                        const achievement_date = document.getElementById('another_achievement_date').value;
                                        const sports = document.getElementById('another_sports').value;
                                        const participation = document.getElementById('another_participation').value;
                                        const eventDescription = document.getElementById('another_event_description_edit').value;
                                        let participationData = '';

                                        if (participation == 0) {
                                            const indivName = document.getElementById('another_indiv_name').value;
                                            const indivRollNumb = document.getElementById('another_indiv_roll_numb').value;
                                            console.log(`Individual Name: ${indivName}`);
                                            participationData += `${indivRollNumb}`;
                                            const fileInput = document.getElementById('another_uploadPhoto');
                                            const fileName = fileInput.files[0] ? fileInput.files[0].name : 'No file selected';
                                            console.log(`Uploaded photo : ${fileName}`);
                                            const pdfInput = document.getElementById('another_uploadcertificate');
                                            const pdfName = pdfInput.files[0] ? pdfInput.files[0].name : 'No file selected';
                                            console.log(`Uploaded PDF : ${pdfName}`);

                                        } else if (participation == 1) { // Team
                                            const teamSize = document.getElementById('another_teamSize').value;
                                            const captainName = document.getElementById('another_captainName').value;
                                            const captainRollNumber = document.getElementById('another_captainRollNumber').value;
                                            participationData += `${captainRollNumber}`;
                                            const captain = `${captainName}`;
                                            console.log(`Captain Name: ${captainName}`);
                                            for (let i = 2; i <= teamSize; i++) {
                                                const rollNumber = document.getElementById(`another_indiv_roll_numb${i}`).value;
                                                // console.log(`Member ${i - 1} Roll Number: ${rollNumber}`);
                                                participationData += ` , ${rollNumber}`;
                                            }
                                            const fileInput = document.getElementById('another_uploadPhoto');
                                            const fileName = fileInput.files[0] ? fileInput.files[0].name : 'No file selected';
                                            console.log(`Uploaded photo : ${fileName}`);

                                            const pdfInput = document.getElementById('another_uploadcertificate');
                                            const pdfName = pdfInput.files[0] ? pdfInput.files[0].name : 'No file selected';
                                            console.log(`Uploaded PDF : ${pdfName}`);
                                        }
                                        console.log(`Achievement ID: ${id}`);

                                        console.log(`Achievement Name: ${achievement_name}`);
                                        console.log(`Achievement Date: ${achievement_date}`);
                                        console.log(`Sports: ${sports}`);
                                        console.log(`Participation roll number: ${participationData}`);
                                        console.log(`Achievement Description: ${eventDescription}`);

                                    }
                                }

                                async function sendAnotherAchievementData() {
                                    try {
                                        console.log("sendAnotherAchievementData function called"); // Debugging line

                                        if (validateAnotherForm()) {
                                            const id = document.getElementById('achievement_id_edit').value;
                                            const achievement_name = document.getElementById('another_event_name_edit').value;
                                            const achievement_date = document.getElementById('another_achievement_date').value;
                                            const sport_id = document.getElementById('another_sports').value;
                                            const is_team = document.getElementById('another_participation').value;
                                            const description = document.getElementById('another_event_description_edit').value;

                                            let name = '';
                                            let roll_numbers = [];

                                            if (is_team === '0') { // Individual
                                                name = document.getElementById('another_indiv_name').value;
                                                roll_numbers.push(document.getElementById('another_indiv_roll_numb').value);
                                            } else { // Team
                                                const teamSize = parseInt(document.getElementById('another_teamSize').value);
                                                name = document.getElementById('another_captainName').value;
                                                roll_numbers.push(document.getElementById('another_captainRollNumber').value);

                                                for (let i = 2; i <= teamSize; i++) {
                                                    roll_numbers.push(document.getElementById(`another_indiv_roll_numb${i}`).value);
                                                }
                                            }

                                            const formData = new FormData();
                                            formData.append('id', id);
                                            formData.append('achievement_name', achievement_name);
                                            formData.append('achievement_date', achievement_date);
                                            formData.append('description', description);
                                            formData.append('name', name);
                                            formData.append('roll_no', JSON.stringify(roll_numbers));
                                            formData.append('is_team', is_team);
                                            formData.append('sport_id', sport_id);

                                            // Append files
                                            const photoFile = document.getElementById('another_uploadPhoto').files[0];
                                            const certificateFile = document.getElementById('another_uploadcertificate').files[0];

                                            if (photoFile) formData.append('image', photoFile);
                                            if (certificateFile) formData.append('pdf', certificateFile);

                                            // Logging formData entries
                                            for (var pair of formData.entries()) {
                                                console.log(pair[0] + ': ' + pair[1]);
                                            }

                                            const response = await fetch('https://aagneya-backend.onrender.com/api/updateachievement', {
                                                method: 'POST',
                                                body: formData
                                            });

                                            if (!response.ok) {
                                                const errorText = await response.text();
                                                throw new Error(`HTTP error! status: ${response.status}, response: ${errorText}`);
                                            }

                                            const data = await response.json();

                                            if (data.success) {
                                                alert('Achievement updated successfully');
                                                closeFormallmember(); // Close the form on success
                                            } else {
                                                alert('Error editing achievement: ' + (data.error || 'Unknown error'));
                                            }
                                        }
                                    } catch (error) {
                                        console.error('Error:', error);
                                        alert('An error occurred while editing the achievement: ' + error.message);
                                    }
                                }

                                // Function to close the form
                                function closeFormallmember() {
                                    var displayEvents = document.getElementById('displayallmembers');
                                    if (displayEvents) {
                                        displayEvents.style.display = 'block';
                                    }

                                    var editForm = document.getElementById('allmember');
                                    if (editForm) {
                                        editForm.style.display = 'none';
                                    }
                                }
                                document.addEventListener('DOMContentLoaded', function () {
                                    flatpickr("#another_achievement_date", {
                                        dateFormat: "Y-m-d",
                                        altInput: true,
                                        altFormat: "F j, Y"
                                    });
                                });
                            </script>





                            <div id="unmonitoredSection" class="flex flex-col mt-6 hidden">



                                <div class="displayevents" id="displayevents">
                                    <table class="min-w-full divide-y divide-gray-200 overflow-x-auto">
                                        <thead class="bg-blue-100">
                                            <tr>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    Name
                                                </th>
                                                <!-- <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Title
                                    </th> -->
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    Sports
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    Role
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    Year
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    Phone
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    Actions
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200" id="displayusers">


                                            <tr>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="flex items-center">

                                                        <div class="ml-4">
                                                            <div class="text-sm font-medium text-gray-900">
                                                                2020 National Championship
                                                            </div>
                                                            <div class="text-sm text-gray-500">
                                                                Amrita
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>

                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                                        Chess
                                                    </span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                    <div class="ml-4">
                                                        <div class="text-sm font-medium text-gray-900">
                                                            Abinesh T
                                                        </div>
                                                        <div class="text-sm text-gray-500">
                                                            CB.EN.U4CSE21302
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                    03/07/2024
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                                                        Team
                                                    </span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap  text-sm font-medium">
                                                    <a href="#" class="text-indigo-600 hover:text-indigo-900" id="editbutton" onclick="showEditForm()">Edit</a>
                                                    <a href="#" class="ml-2 text-red-600 hover:text-red-900" id="deactivate" onclick="deactivate()">Delete</a>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="flex items-center">

                                                        <div class="ml-4">
                                                            <div class="text-sm font-medium text-gray-900">
                                                                2020 National Championship
                                                            </div>
                                                            <div class="text-sm text-gray-500">
                                                                Amrita
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>

                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                                        Chess
                                                    </span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                    <div class="ml-4">
                                                        <div class="text-sm font-medium text-gray-900">
                                                            Abinesh T
                                                        </div>
                                                        <div class="text-sm text-gray-500">
                                                            CB.EN.U4CSE21302
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                    03/07/2024
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                                                        Team
                                                    </span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap  text-sm font-medium">
                                                    <a href="#" class="text-indigo-600 hover:text-indigo-900" id="editbutton" onclick="showEditForm()">Edit</a>
                                                    <a href="#" class="ml-2 text-red-600 hover:text-red-900" id="deactivate" onclick="deactivate()">Delete</a>
                                                </td>
                                            </tr>



                                            <!-- More rows... -->

                                        </tbody>
                                    </table>

                                </div>

                                <div id="deactivateModal" class="modal fixed inset-0 z-10 flex items-center justify-center overflow-y-auto hidden">
                                    <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4 sm:my-8 sm:w-full sm:max-w-lg rounded-lg shadow-xl">
                                        <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                                            <div class="sm:flex sm:items-start">
                                                <div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                                                    <svg aria-hidden="true" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" fill="none" class="h-6 w-6 text-red-600">
                                                        <path
                                                            d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"
                                                            stroke-linejoin="round" stroke-linecap="round"></path>
                                                    </svg>
                                                </div>
                                                <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                                                    <h3 id="modal-title" class="text-base font-semibold leading-6 text-gray-900">
                                                        Deactivate account
                                                    </h3>
                                                    <div class="mt-2">
                                                        <p class="text-sm text-gray-500">
                                                            Are you sure you want to deactivate the account?
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                                            <button id="deactivateBtn" class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto" type="button">
                                                Deactivate
                                            </button>
                                            <button id="deactivateCancel" onclick="closedeactivate()" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" type="button">
                                                Cancel
                                            </button>
                                        </div>
                                    </div>
                                </div>


                                <div class="mx-4 md:mx-14 mt-10 border-2 border-black bg-white bg-opacity-90 rounded-lg relative" id="editvent" style="display: none;">
                                    <button class="absolute top-2 right-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full flex items-center" onclick="closeForm()">
                                        <span class="mr-1">Close</span>
                                        <i class='bx bxs-x-circle'></i>
                                    </button>
                                    <div class="mt-6 md:mt-10 text-center font-bold text-lg md:text-xl">Edit user Details
                                    </div>
                                    <div class="p-4 md:p-8">
                                        <div class="flex flex-col md:flex-row gap-4">
                                            <input type="text" name="roll_no" id="roll__edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                                placeholder="Roll_no *" />

                                            <select name="category" id="category_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm">
                                                <option value="" disabled selected>Select Role</option>
                                                <option value="Category 1">Category 1</option>
                                                <option value="Category 2">Category 2</option>
                                                <option value="Category 3">Category 3</option>
                                            </select>
                                        </div>

                                        <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                                            <select name="category" id="category_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm">
                                                <option value="" disabled selected>Select Role</option>
                                                <option value="Category 1">Category 1</option>
                                                <option value="Category 2">Category 2</option>
                                                <option value="Category 3">Category 3</option>
                                            </select>

                                            <select name="gender" id="gender_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm">
                                                <option value="" disabled selected>Select Gender</option>
                                                <option value="Boys">Boys</option>
                                                <option value="Girls">Girls</option>

                                            </select>
                                        </div>

                                        <div class="my-4 md:my-6 flex flex-col md:flex-row gap-4">
                                            <input type="date" name="event_date" id="event_date_edit" class="mt-4 md:mt-1 block w-full md:w-1/2 rounded-md border border-gray-300 bg-white px-3 py-2 sm:py-4 placeholder-gray-400 shadow-sm placeholder-semibold text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 sm:text-sm"
                                                placeholder="Event Date" />


                                        </div>


                                        <div class="text-center">
                                            <button type="button" class="cursor-pointer rounded-lg bg-purple-700 px-6 py-2 sm:py-3 text-sm font-semibold text-white mr-4" onclick="updateEvent()">Update Event</button>
                                        </div>

                                    </div>



                                </div>
                            </div>


                </section>



                </div>



        </main>

        </div>
        <script>
            function logout() {
                // Remove token from local storage
                localStorage.removeItem('token');

                // Redirect to index.html
                window.location.href = '../login/login.html';
            }
        </script>


        <script>
            let token;

            async function decodeToken() {
                try {
                    token = localStorage.getItem('token');
                    console.log('Token from localStorage:', token);

                    if (!token) {
                        console.error('Token not found in local storage');
                        window.location.href = '../login/login.html';
                        return;
                    }

                    const response = await fetch('https://aagneya-backend.onrender.com/api/decodeToken', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify({
                            token: token
                        })
                    });

                    if (response.ok) {
                        const data = await response.json();
                        console.log('Decoded token data:', data);

                        // Fetch sports data after successful token decoding
                        fetchSportsData();
                    } else {
                        console.error('Failed to decode token:', response.statusText);
                        window.location.href = '../login/login.html';
                    }
                } catch (error) {
                    console.error('Error in decodeToken:', error.message);
                    window.location.href = '../login/login.html';
                }
            }

            async function fetchSportsData() {
                try {
                    const response = await fetch('https://aagneya-backend.onrender.com/api/displaysports', {
                        method: 'GET',
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    });

                    if (!response.ok) {
                        throw new Error('Failed to fetch sports data');
                    }

                    const data = await response.json();
                    console.log('Sports data:', data);
                    const sportsSelect = document.getElementById('sports');

                    // Clear previous options except the default one
                    sportsSelect.innerHTML = '<option value="" disabled selected>Please Select Sports</option>';

                    data.sports.forEach(sport => {
                        const option = document.createElement('option');
                        option.value = sport.sport_id; // Set sport_id as the option value
                        option.textContent = sport.sport_name;
                        sportsSelect.appendChild(option);
                    });


                    const sportsSelect1 = document.getElementById('another_sports');

                    // Clear previous options except the default one
                    sportsSelect1.innerHTML = '<option value="" disabled selected>Please Select Sports</option>';

                    data.sports.forEach(sport => {
                        const option = document.createElement('option');
                        option.value = sport.sport_id; // Set sport_id as the option value
                        option.textContent = sport.sport_name;
                        sportsSelect1.appendChild(option);
                    });
                } catch (error) {
                    console.error('Error fetching sports data:', error);
                    document.getElementById('sports_error').textContent = 'Error fetching sports data. Please try again later.';
                }
            }

            // Decode token and fetch sports data on page load
            document.addEventListener('DOMContentLoaded', decodeToken);
        </script>



        <script src="./js/index.js"></script>
</body>

</html>

<style>
    [x-cloak] {
        display: none
    }
</style>

<script src="https://cdn.tailwindcss.com"></script>

<script>
    tailwind.config = {
        darkMode: 'class',
    }
</script>

<script src="//unpkg.com/alpinejs" defer></script>

<style>
    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    
    .event-date {
        font-family: 'Roboto', sans-serif;
        font-weight: 700;
    }
    
    .event-title {
        font-family: 'Roboto', sans-serif;
        font-weight: 700;
    }
    
    .event-description {
        font-family: 'Roboto', sans-serif;
        font-weight: 400;
    }
    
    .event-details {
        font-family: 'Roboto', sans-serif;
        font-weight: 500;
    }
    
    .spor:hover {
        color: rgb(112, 112, 219);
    }
    
    .loc:hover {
        color: rgb(112, 112, 219);
    }
</style>




<script>
    // JavaScript functions
    function deactivate() {
        // Show the modal
        var modal = document.getElementById('deactivateModal');
        modal.classList.remove('hidden');
        modal.classList.add('flex');
    }

    function closedeactivate() {
        // Close the modal
        var modal = document.getElementById('deactivateModal');
        modal.classList.add('hidden');
        modal.classList.remove('flex');
    }
</script>

<script>
    function showEditForm() {
        // Hide the element with id="displayevents"
        var displayEvents = document.getElementById('displayevents');
        if (displayEvents) {
            displayEvents.style.display = 'none';
        }

        // Show the form with id="editvent"
        var editForm = document.getElementById('editvent');
        if (editForm) {
            editForm.style.display = 'block';
        }
    }

    function closeForm() {
        // Show the element with id="displayevents"
        var displayEvents = document.getElementById('displayevents');
        if (displayEvents) {
            displayEvents.style.display = 'block';
        }

        // Hide the form with id="editvent"
        var editForm = document.getElementById('editvent');
        if (editForm) {
            editForm.style.display = 'none';
        }
    }
</script>



<script>
    function showEditFormallmember(id) {
        // Hide the element with id="displayallmembers"
        var displayEvents = document.getElementById('displayallmembers');
        if (displayEvents) {
            displayEvents.style.display = 'none';
        }

        // Show the form with id="allmember"
        var editForm = document.getElementById('allmember');
        if (editForm) {
            editForm.style.display = 'block';
        }

        // Set the achievement ID in the hidden input field
        document.getElementById('achievement_id_edit').value = id;
        console.log('Edit ID:', id);
    }


    function closeFormallmember() {
        // Show the element with id="displayevents"
        var displayEvents = document.getElementById('displayallmembers');
        if (displayEvents) {
            displayEvents.style.display = 'block';
        }

        // Hide the form with id="editvent"
        var editForm = document.getElementById('allmember');
        if (editForm) {
            editForm.style.display = 'none';
        }
    }
</script>


<script>
    // Function to truncate text to a specified length followed by ellipsis
    function truncateText(text, length) {
        if (text.length > length) {
            return text.substring(0, length) + '...';
        }
        return text;
    }

    document.addEventListener('DOMContentLoaded', async function() {
        try {
            const response = await fetch('https://aagneya-backend.onrender.com/api/displayachievementspending', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            if (!response.ok) {
                throw new Error('Failed to fetch achievements');
            }

            const data = await response.json();
            console.log('Achievements pending:', data.achievements);
            displayAchievements(data.achievements); // Display achievements in the table
        } catch (error) {
            console.error('Error fetching achievements:', error);
            // Handle error in UI, e.g., display an error message
        }
    });

    function displayAchievements(achievements) {
        const tableBody = document.getElementById('displayusers');
        tableBody.innerHTML = ''; // Clear existing rows

        achievements.forEach(achievement => {
            // Determine the team or individual label based on is_team value
            const category = achievement.is_team ? 'Team' : 'Individual';

            // Truncate achievement description to 19 characters + ellipsis
            const truncatedDescription = truncateText(achievement.description, 19);

            // Convert roll number to uppercase
            const rollNumber = JSON.parse(achievement.roll_no)[0].toUpperCase();


            const row = document.createElement('tr');
            row.innerHTML = `
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                    <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900">
                            ${achievement.achievement_name}
                        </div>
                        <div class="text-sm text-gray-500">
                            ${truncatedDescription}
                        </div>
                    </div>
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                    ${achievement.sport_name.toLowerCase()} <!-- Display sport in lowercase -->
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                <div class="ml-4">
                    <div class="text-sm font-medium text-gray-900">
                        ${achievement.name}
                    </div>
                    <div class="text-sm text-gray-500">
                        ${rollNumber} <!-- Display roll number in uppercase -->
                    </div>
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                ${new Date(achievement.achievement_date).toLocaleDateString()}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                    ${category}
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
    <a href="#" class="text-indigo-600 hover:text-indigo-900" id="editbutton" onclick="showEditFormallmember(${achievement.achievement_id})">Edit</a>
    <a href="#" class="ml-2 text-green-600 hover:text-green-900" onclick="activateAchievement(${achievement.achievement_id})">Activate</a>
</td>

        `;
            tableBody.appendChild(row);
        });


    }
</script>

</script>


<script>
    async function fetchAndDisplayAchievements() {
        try {
            const response = await fetch('https://aagneya-backend.onrender.com/api/displayachievements');
            const data = await response.json();

            if (data.success && data.achievements.length > 0) {
                const achievementsContainer = document.getElementById('achievements-container');
                achievementsContainer.innerHTML = ''; // Clear previous content

                data.achievements.forEach(achievement => {
                    const achievementDate = new Date(achievement.achievement_date);
                    const month = achievementDate.toLocaleString('default', {
                        month: 'short'
                    });
                    const day = achievementDate.getDate();


                    // Construct the full URL for the photo
                    const photoURL = `https://aagneya-backend.onrender.com/${achievement.photo_path.replace(/\\/g, '/')}`;


                    const achievementHTML = `
    <div class="achievement-item w-full max-w-3xl bg-white rounded-lg shadow-md overflow-hidden mb-6">
        <div class="image-container w-full h-64 bg-gray-400">
            <img src="${photoURL}" alt="Achievement Photo" class="achievement-image w-full h-full object-cover">
        </div>
        <div class="p-4 flex flex-col justify-between">
            <div class="flex items-center justify-between mb-4">
                <div class="text-center flex-shrink-0 bg-gray-400 text-white p-3 rounded-lg">
                    <div class="text-lg md:text-3xl">${month}</div>
                    <div class="text-xl md:text-6xl">${day}</div>
                </div>
                <div class="ml-4 flex-grow">
                    <h2 class="text-2xl font-bold text-gray-800">${achievement.achievement_name}</h2>
                    <p class="text-lg text-gray-700 mt-2">${achievement.description}</p>
                    <div class="flex items-center justify-between mt-4">
                        <div class="text-gray-500 text-sm">
                            <i class="fa fa-map-marker-alt mr-2"></i> ${achievement.location || 'Location not specified'}
                        </div>
                        <div class="text-gray-500 flex items-center">
                            ${achievement.sport_name}
                        </div>
                    </div>
                    <!-- Deactivate Button -->
                    <div class="mt-4 text-right">
                        <button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-700"
                                onclick="deactivateAchievement(${achievement.achievement_id})">
                            Deactivate
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
`;


                    achievementsContainer.innerHTML += achievementHTML;
                });
            } else {
                achievementsContainer.innerHTML = '<p>No achievements to display.</p>';
            }
        } catch (error) {
            console.error('Error fetching achievements:', error);
            document.getElementById('achievements-container').innerHTML = '<p>Error loading achievements.</p>';
        }
    }

    // Fetch and display achievements on page load
    document.addEventListener('DOMContentLoaded', fetchAndDisplayAchievements);
</script>

<style>
    .achievement-item {
        transition: transform 0.2s;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .achievement-item:hover {
        transform: translateY(-5px);
    }
    
    .image-container {
        border-bottom: 2px solid #ccc;
        /* Simple border below the image */
    }
    
    .achievement-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        max-height: 300px;
    }
    
    .achievement-item .text-lg {
        font-size: 1.125rem;
        /* Enlarge the description text */
    }
    
    .achievement-item .text-sm {
        font-size: 0.875rem;
        /* Smaller text for location */
    }
</style>
<script>
    function deactivateAchievement(achievementId) {
        if (confirm('Are you sure you want to deactivate this achievement?')) {
            fetch('https://aagneya-backend.onrender.com/api/admindeactivateachievement', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        achievement_id: achievementId
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Achievement deactivated successfully!');
                        window.location.reload();

                        document.getElementById(`achievement-${achievementId}`).remove();
                    } else {
                        alert('Error deactivating achievement: ' + data.message);
                    }
                })
                .catch(error => console.error('Error:', error));
        }
    }

    function activateAchievement(achievementId) {
        if (confirm('Are you sure you want to activate this achievement?')) {
            fetch('https://aagneya-backend.onrender.com/api/adminactivateachievement', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        achievement_id: achievementId
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Achievement activated successfully!');
                        window.location.reload(); // Reload the page after successful activation
                    } else {
                        alert('Error activating achievement: ' + data.message);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while activating the achievement.');
                });
        }
    }
</script>